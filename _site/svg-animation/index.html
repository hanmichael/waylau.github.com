<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Way Lau's Personal Site | www.waylau.com">
  <meta name="author" content="Way Lau">
  <meta name="keywords" content="SVG Animation动画, Way Lau's Blog, Way Lau">
  <title>SVG Animation动画 - Way Lau's Blog</title>
  <link rel="canonical" href="http://www.waylau.com/svg-animation/">
  <link rel="icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/res/css/public.css">
  <link rel="stylesheet" href="/res/css/light.css">
  <script src="/res/js/light.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?28cf5fa48a599e39c5cc760931de942f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="/res/img/icon.png" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Way Lau's Blog</a></h1>
  <h2 class="sub-title">技术改变世界！</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/timing/"><i class="fa fa-clock-o"></i>&nbsp;时光机</a></li>
    
      <li><a href="/categories/"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/tags/"><i class="fa fa-bookmark"></i>&nbsp;标签</a></li>
    
      <li><a href="http://labs.waylau.com/"><i class="fa fa-building"></i>&nbsp;示例</a></li>
    
      <li><a href="/books/"><i class="fa fa-book"></i>&nbsp;书籍</a></li>
    
      <li><a href="/about/"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/waylau521" title="新浪微博" target="_blank"><i class="fa fa-weibo "></i></a>
    <a class="github" href="https://github.com/waylau" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="twitter" href="https://twitter.com/waylau521" title="Twitter" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
  <div id="license">
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="本站所有作品采用：&#10;知识共享《署名 非商业性使用 相同方式共享 3.0》&#10;进行许可" >
    <img alt="License" height="31" width="88" src="/res/img/license.png" /></a>
  </div>
</div>
    <div class="main">
    <header class="post-header">
  <h1 class="post-title"><a href="/svg-animation/">SVG Animation动画</a></h2>
  <p class="post-meta">
    <i class="fa fa-calendar"></i>
    2014年05月09日
    <i class="space"></i>
    <i class="fa fa-tags"></i>
    <a class="post-category" href="/page/category.html#svg">svg</a>	
  </p>
</header>
<div class="post-main">
<h1>SVG动画示例</h1>

<p>下面是一个简单的SVG动画的例子：</p>

<p><svg width="500" height="100">
<rect x="10" y="10" height="110" width="110"
   style="stroke:#ff0000; fill: #0000ff">
   <animateTransform
attributeName="transform"
begin="0s"
dur="20s"
type="rotate"
from="0 60 60"
to="360 60 60"
repeatCount="indefinite"
   />
</rect>
</svg></p>

<pre><code>&lt;svg width="500" height="100"&gt;
     &lt;rect x="10" y="10" height="110" width="110"
         style="stroke:#ff0000; fill: #0000ff"&gt;
        &lt;animateTransform
            attributeName="transform"
            begin="0s"
            dur="20s"
            type="rotate"
            from="0 60 60"
            to="360 60 60"
            repeatCount="indefinite" 
        /&gt;
    &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<p>注意到，&lt;rect&gt;元素有一个&lt;animateTransform&gt;嵌套在它里面。正是这种元素驱动了矩形。</p>

<h1>动画选项的概述</h1>

<p>动画是通过操纵图形随时间变化的属性而进行的。用下面5个SVG动画元素的
一个或多个来完成的：</p>

<ul>
<li>&lt;set&gt;</li>
<li>&lt;animate&gt;</li>
<li>&lt;animateColor&gt;</li>
<li>&lt;animateTransform&gt;</li>
<li>&lt;animateMotion&gt;</li>
</ul>


<p>这些动画元素在整个这段文字的后面要谈到的。</p>

<h2>set</h2>

<p>&lt;set&gt;元素是最简单的SVG动画元素。j简单地将一个属性修改成一定值后，特定时间间隔过后就能能效了。因此，该图形是不连续的动画，只是改变属性值一次。</p>

<p>这里是一个&lt;set&gt;元素的例子：</p>

<p><svg width="500" height="100">
<circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;">
<set attributeName="r" attributeType="XML"
 to="100"
 begin="5s" />
</circle>
</svg></p>

<pre><code>&lt;svg width="500" height="100"&gt;
    &lt;circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;"&gt;
        &lt;set attributeName="r" attributeType="XML"
                 to="100"
                 begin="5s" /&gt;
    &lt;/circle&gt;
&lt;/svg&gt;
</code></pre>

<p>注意&lt;set&gt;嵌套在<em>circle</em>里面。这就是&lt;set&gt;元素的用法。</p>

<p>该&lt;set&gt;元素将时间设置成一个属性的值。设置属性的名称是指定的<em>attributeName</em>。修改成的值为<em>to</em>。开始生效的时间间隔为<em>begin</em>。</p>

<p>上面的例子中的属性设置<em>r</em> 5秒后为100。</p>

<h2>attributeType</h2>

<p>在前面的例子也有一个<em>attributeType</em>属性在&lt;set&gt;元素里面。该值设置为<em>XML</em>。因为SVG的&lt;circle &gt;元素素是XML元素。</p>

<p>也可以将<em>attributeType</em>属性设置为<em>CSS</em>。</p>

<p><svg width="400" height="400">
<rect x="20" y="20" width="250" height="250" style="fill:blue">
<animate attributeType="CSS" attributeName="opacity" from="1" to="0" dur="5s" repeatCount="indefinite" />
</rect>
Sorry, your browser does not support inline SVG.<br/>
</svg></p>

<pre><code>&lt;svg width="400" height="400"&gt;
  &lt;rect x="20" y="20" width="250" height="250" style="fill:blue"&gt;
    &lt;animate attributeType="CSS" attributeName="opacity" from="1" to="0" dur="5s" repeatCount="indefinite" /&gt;
  &lt;/rect&gt;
  Sorry, your browser does not support inline SVG.  
&lt;/svg&gt;
</code></pre>

<p>如果你不提供一个<em>attributeType</em>属性，那么浏览器会尝试猜测是一个<em>XML</em>属性还是<em>CSS</em>属性。</p>

<h2>animate</h2>

<p>该<em>animate</em>元素被用来驱动SVG图形的属性。下面是一个例子：</p>

<p><svg width="500" height="75">
<circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;">
<animate attributeName="cx" attributeType="XML"
 from="30"  to="470"
 begin="0s" dur="5s"
 fill="remove" repeatCount="indefinite"/>
</circle>
</svg></p>

<pre><code>&lt;svg width="500" height="75"&gt;
    &lt;circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;"&gt;
        &lt;animate attributeName="cx" attributeType="XML"
                 from="30"  to="470"
                 begin="0s" dur="5s"
                 fill="remove" repeatCount="indefinite"/&gt;
    &lt;/circle&gt;
&lt;/svg&gt;
</code></pre>

<p>这个例子中的&lt;circle&gt;元素<em>cx</em>的属性从30改成了479。动画从0秒开始，并具有5秒持续时间。</p>

<p>当动画完成，<em>animate</em>的属性被设置回其原始值（<em>fill="remove"</em>）。如果想要的将动画属保持在<em>to</em>值的位置，则<em>fill</em>设置为<em>"freeze"</em>。动画如果无限重复则设置<em>repeatCount</em>的值。</p>

<h2>animateColor</h2>

<p><svg width="500" height="80">
<circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;">
<animateColor attributeName="fill"
 from="#0000ff"  to="#ff0000"
 begin="0s" dur="5s"
 fill="freeze" repeatCount="indefinite"/>
</circle>
</svg></p>

<pre><code>&lt;svg width="500" height="80"&gt;
    &lt;circle cx="30" cy="30" r="25" style="stroke: none; fill: #0000ff;"&gt;
        &lt;animateColor attributeName="fill"
                 from="#0000ff"  to="#ff0000"
                 begin="0s" dur="5s"
                 fill="freeze" repeatCount="indefinite"/&gt;
    &lt;/circle&gt;
&lt;/svg&gt;
</code></pre>

<p>这个例子中的动画填写将CSS属性从颜色<em>＃0000FF</em>（蓝色）的颜色转为<em>＃FF0000</em>（红色）。</p>

<p><strong>注</strong>：
尽管SVG定义了"animateColor"，但是它已经被弃用了，替代它的是"animate"元素。</p>

<h2>animateTransform</h2>

<p>&lt;animateTransform&gt;元素可以驱动图形的<em>transform&amp;</em>的属性。而&lt;animate&gt;元素不能做到这一点。
下面是一个例子：</p>

<p><svg width="500" height="200">
<rect x="20" y="20" width="100" height="40"
style="stroke: #ff00ff; fill: none;" >
<animateTransform attributeName="transform"
type="rotate"
from="0 100 100" to="360 100 100"
begin="0s" dur="10s"
repeatCount="indefinite"
/>
</rect>
<circle cx="100" cy="100" r="2" style="stroke: none; fill: #0000ff;"/>
</svg></p>

<pre><code>&lt;svg width="500" height="200"&gt;

  &lt;rect x="20" y="20" width="100" height="40"
        style="stroke: #ff00ff; fill: none;" &gt;
      &lt;animateTransform attributeName="transform"
                        type="rotate"
                        from="0 100 100" to="360 100 100"
                        begin="0s" dur="10s"
                        repeatCount="indefinite"
              /&gt;
  &lt;/rect&gt;
  &lt;circle cx="100" cy="100" r="2" style="stroke: none; fill: #0000ff;"/&gt;
&lt;/svg&gt;
</code></pre>

<p>本例中在点（100,100）位置从0至360度进行旋绕。</p>

<p>下面是比例尺放大的示例：</p>

<p><svg width="500" height="200">
<rect x="20" y="20" width="40" height="40"
style="stroke: #ff00ff; fill: none;" >
<animateTransform attributeName="transform"
  type="scale"
  from="1 1" to="2 3"
  begin="0s" dur="10s"
  repeatCount="indefinite"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500" height="200"&gt;

    &lt;rect x="20" y="20" width="40" height="40"
          style="stroke: #ff00ff; fill: none;" &gt;
        &lt;animateTransform attributeName="transform"
                          type="scale"
                          from="1 1" to="2 3"
                          begin="0s" dur="10s"
                          repeatCount="indefinite"
                /&gt;
    &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<h2>animateMotion</h2>

<p>该&lt;animateMotion&gt;元素可以驱动图形沿着一条路径运动。下面是一个例子：</p>

<p><svg width="500" height="150">
<path d="M10,50 q60,50 100,0 q60,-50 100,0"
style="stroke: #000000; fill: none;"
  />
<rect x="0" y="0" width="30" height="15"
  style="stroke: #ff0000; fill: none;">
<animateMotion
  path="M10,50 q60,50 100,0 q60,-50 100,0"
  begin="0s" dur="10s" repeatCount="indefinite"
  />
</rect>
</svg></p>

<pre><code>&lt;svg width="500" height="150"&gt;
  &lt;path d="M10,50 q60,50 100,0 q60,-50 100,0"
    style="stroke: #000000; fill: none;"
          /&gt;
  &lt;rect x="0" y="0" width="30" height="15"
          style="stroke: #ff0000; fill: none;"&gt;
      &lt;animateMotion
          path="M10,50 q60,50 100,0 q60,-50 100,0"
          begin="0s" dur="10s" repeatCount="indefinite"
          /&gt;
  &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<p>为了以配合道路的坡度，设置了<em>rotate="auto"</em>。下面是一个例子：</p>

<p><svg width="500" height="150">
<path d="M10,50 q60,50 100,0 q60,-50 100,0"
style="stroke: #000000; fill: none;"
/>
<rect x="0" y="0" width="30" height="15"
style="stroke: #ff0000; fill: none;">
<animateMotion
path="M10,50 q60,50 100,0 q60,-50 100,0"
begin="0s" dur="10s" repeatCount="indefinite"
rotate="auto"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500" height="150"&gt;

    &lt;path d="M10,50 q60,50 100,0 q60,-50 100,0"
          style="stroke: #000000; fill: none;"
            /&gt;

    &lt;rect x="0" y="0" width="30" height="15"
          style="stroke: #ff0000; fill: none;"&gt;
        &lt;animateMotion
                path="M10,50 q60,50 100,0 q60,-50 100,0"
                begin="0s" dur="10s" repeatCount="indefinite"
                rotate="auto"
                /&gt;
    &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<h2>Time Units（时间单位）</h2>

<p>时间单位经常用在<em>begin</em>,<em>dur</em>和<em>end</em>的属性值中，<em>"5s"</em>表示"5秒"。</p>

<table>
<thead>
<tr>
<th> 单位   </th>
<th style="text-align:center;">  描述  </th>
</tr>
</thead>
<tbody>
<tr>
<td> h   </td>
<td style="text-align:center;">   Hours（时） </td>
</tr>
<tr>
<td> min </td>
<td style="text-align:center;">   Minutes(分)</td>
</tr>
<tr>
<td> s  </td>
<td style="text-align:center;">  Seconds(秒) </td>
</tr>
<tr>
<td> ms  </td>
<td style="text-align:center;">  Milliseconds(毫秒)  </td>
</tr>
</tbody>
</table>


<p>也可以是这种<code>hh:mm:ss</code>这种格式，比如<code>1:30:45</code>表示时间长度为"1小时30分钟45秒"。</p>

<h2>Coordinating Animations（协调动画）</h2>

<p><svg width="500" height="100">
<rect x="0" y="0" width="30" height="15"
style="stroke: #ff0000; fill: none;">
<animate id="one"
attributeName="x" attributeType="XML"
from="0" to="400"
begin="0s" dur="10s" fill="freeze"
/>
<animate
attributeName="y" attributeType="XML"
from="0" to="80"
begin="one.end" dur="10s" fill="freeze"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500" height="100"&gt;

    &lt;rect x="0" y="0" width="30" height="15"
          style="stroke: #ff0000; fill: none;"&gt;

        &lt;animate id="one"
                attributeName="x" attributeType="XML"
                from="0" to="400"
                begin="0s" dur="10s" fill="freeze"
                /&gt;
        &lt;animate
                attributeName="y" attributeType="XML"
                from="0" to="80"
                begin="one.end" dur="10s" fill="freeze"
                /&gt;
    &lt;/rect&gt;

&lt;/svg&gt;
</code></pre>

<p>一个动画的开始时间是另外一个动画的结束时间。</p>

<p>也可以通过设置时间的偏移量
    one.begin+10s
    one.end+5s</p>

<p>另外，你可以在一个动画指​​定一个明确的结束时间<em>end</em>属性。这并不能取代<em>dur</em>属性。它所做的是添加另一种可能结束一个动画，所以以先到为准。下面是一个例子：</p>

<pre><code>&lt;animate
attributeName="y" attributeType="XML"
from="0" to="50"
begin="one.begin+3s" dur="10s" end="one.end"
fill="freeze"
/&gt;
</code></pre>

<p>该动画将有10秒的持续时间，或与<em>one</em>动画一起停止结束，以先到那个为准。</p>

<h2>Repeating Animations（重复动画）</h2>

<p>重复动画可以用动画元素中的两个属性。
* 第一个属性是的<em>repeatCount</em>属性。在这个属性，你可以设置一个数值，这是重复动画的次数，或值不确定，将继续运行动画不会停下。
* 第二属性是<em>repeatDur</em>其中指定该动画将被重复的持续时间。</p>

<p><svg width="500"  height="100">
<rect x="10" y="10" width="40" height="20"
style="stroke: #000000; fill: none;">
<animate attributeName="x" attributeType="XML"
 from="10" to="400"
 begin="0s" dur="10s"
 repeatCount="indefinite"
/>
<animate attributeName="y" attributeType="XML"
 from="10" to="100"
 begin="0s" dur="10s"
 fill="freeze"
 repeatCount="indefinite"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500"  height="100"&gt;
   &lt;rect x="10" y="10" width="40" height="20"
         style="stroke: #000000; fill: none;"&gt;
        &lt;animate attributeName="x" attributeType="XML"
                 from="10" to="400"
                 begin="0s" dur="10s"
                 repeatCount="indefinite"
                /&gt;
        &lt;animate attributeName="y" attributeType="XML"
                 from="10" to="100"
                 begin="0s" dur="10s"
                 fill="freeze"
                 repeatCount="indefinite"
                /&gt;
   &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<h2>Combining Animations（结合动画）</h2>

<p>动画可以组合起来用，这里是一个例子：</p>

<p><svg width="500"  height="100">
<rect x="10" y="10" width="40" height="20"
style="stroke: #000000; fill: none;">
<animate attributeName="x" attributeType="XML"
 from="10" to="400"
 begin="0s" dur="10s"
 repeatCount="indefinite"
/>
<animate attributeName="y" attributeType="XML"
 from="10" to="100"
 begin="0s" dur="10s"
 fill="freeze"
 repeatCount="indefinite"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500"  height="100"&gt;
   &lt;rect x="10" y="10" width="40" height="20"
         style="stroke: #000000; fill: none;"&gt;
        &lt;animate attributeName="x" attributeType="XML"
                 from="10" to="400"
                 begin="0s" dur="10s"
                 repeatCount="indefinite"
                /&gt;
        &lt;animate attributeName="y" attributeType="XML"
                 from="10" to="100"
                 begin="0s" dur="10s"
                 fill="freeze"
                 repeatCount="indefinite"
                /&gt;
   &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<p>这个例子中有两个动画，每个动画的分别驱动<em>x</em>和<em>Ÿ</em>的属性。</p>

<p>当组合&lt;animateTransform&gt;元素，默认的行为是第二个动画来抵消第一个。但是，您可以通过设置<em>additive</em>属性值为<em>sum</em>的而使两种动画效果累加。</p>

<p><svg width="500"  height="100">
<rect x="10" y="10" width="40" height="20"
style="stroke: #000000; fill: none;">
<animateTransform attributeName="transform" attributeType="XML"
 type="scale"
 from="1" to="3"
 begin="0s" dur="10s"
 repeatCount="indefinite"
 additive="sum"
/>
<animateTransform attributeName="transform" attributeType="XML"
 type="rotate"
 from="0 30 20" to="360 30 20"
 begin="0s" dur="10s"
 fill="freeze"
 repeatCount="indefinite"
 additive="sum"
/>
</rect>
</svg></p>

<pre><code>&lt;svg width="500"  height="100"&gt;
    &lt;rect x="10" y="10" width="40" height="20"
          style="stroke: #000000; fill: none;"&gt;
        &lt;animateTransform attributeName="transform" attributeType="XML"
                 type="scale"
                 from="1" to="3"
                 begin="0s" dur="10s"
                 repeatCount="indefinite"
                 additive="sum"
                /&gt;
        &lt;animateTransform attributeName="transform" attributeType="XML"
                 type="rotate"
                 from="0 30 20" to="360 30 20"
                 begin="0s" dur="10s"
                 fill="freeze"
                 repeatCount="indefinite"
                 additive="sum"
                /&gt;
    &lt;/rect&gt;
&lt;/svg&gt;
</code></pre>

<p>参考：<a href="http://tutorials.jenkov.com/svg/svg-animation.html">http://tutorials.jenkov.com/svg/svg-animation.html</a></p>

</div>
<div class="share">
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
  </div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["qzone","tsina","weixin","sqq"],"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/res/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>
<div class="pagination">

<a class="pagination-item newer" href="/svg-gradients-radial/"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;SVG Gradients之Radial</a>


<a class="pagination-item older" href="/from-ireport-to-jaspersoft-studio/">从iReport到Jaspersoft Studio&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>

</div>
<div class="comments">
  <div class="ds-thread" data-title="SVG Animation动画" data-thread-key="/svg-animation" data-url="http://www.waylau.com/svg-animation/"></div>
  <script type="text/javascript">var duoshuoQuery = {short_name:"waylau"};(function(){var ds = document.createElement('script');ds.type = 'text/javascript';ds.async = true;ds.src = '/res/js/embed.js';ds.charset = 'UTF-8';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);})();</script>
</div>
    <footer>Copyright&nbsp;&copy;&nbsp;2014 <a href="http://www.waylau.com">Way Lau's Blog</a><br/><i class="fa fa-cogs" style="color:blueviolet;">&nbsp;</i>Powered by <a href="https://github.com/waylau/jekyll-theme-blog" target="_blank">jekyll-theme-blog</a></footer>
    </div>


  </div>    
  <div id="top"><a id="rocket" href="javascript:;" title="返回顶部"><i></i></a></div>
  


</body>
</html>