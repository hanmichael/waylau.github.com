<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Way Lau's Personal Site | www.waylau.com">
  <meta name="author" content="Way Lau">
  <meta name="keywords" content="Way Lau's Personal Site | www.waylau.com, Way Lau's Blog, 技术改变世界！, Way Lau">
  <title>Way Lau's Personal Site | www.waylau.com</title>
  <link rel="canonical" href="http://www.waylau.com">
  <link rel="icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/res/css/public.css">
  <link rel="stylesheet" href="/res/css/light.css">
  <script src="/res/js/light.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?28cf5fa48a599e39c5cc760931de942f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="/res/img/icon.png" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Way Lau's Blog</a></h1>
  <h2 class="sub-title">技术改变世界！</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/timing/"><i class="fa fa-clock-o"></i>&nbsp;时光机</a></li>
    
      <li><a href="/categories/"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/tags/"><i class="fa fa-bookmark"></i>&nbsp;标签</a></li>
    
      <li><a href="http://labs.waylau.com/"><i class="fa fa-building"></i>&nbsp;示例</a></li>
    
      <li><a href="/books/"><i class="fa fa-book"></i>&nbsp;书籍</a></li>
    
      <li><a href="/about/"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/waylau521" title="新浪微博" target="_blank"><i class="fa fa-weibo "></i></a>
    <a class="github" href="https://github.com/waylau" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="twitter" href="https://twitter.com/waylau521" title="Twitter" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
  <div id="license">
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="本站所有作品采用：&#10;知识共享《署名 非商业性使用 相同方式共享 3.0》&#10;进行许可" >
    <img alt="License" height="31" width="88" src="/res/img/license.png" /></a>
  </div>
</div>
    <div class="main">
    
<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/sqlserver-data-copy-cross-tables/">SQLserver不同数据库不同表之间的复制</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年08月01日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#sqlserver">sqlserver</a>
      </p>
    </header>
    <div class="post-main">
      <p>1.将<code>EEMS</code>库中的<code>Dec_TownInfo</code>表中的数据 复制到 <code>OEM</code>库的<code>c_townInfo</code>中(<code>c_townInfo</code>表事先存在)，先要将表的主键设为自增长类型，且列出列名</p>

<pre><code>SET IDENTITY_INSERT  [OEM].[dbo].[c_townInfo] ON

insert into  [OEM].[dbo].[c_townInfo] (id,name,city_id,code,logo) select * FROM [EEMS].[dbo].[Dec_TownInfo]
</code></pre>

<p>2.将<code>EEMS</code>库中的<code>Dec_TownInfo</code>表中的数据 复制到 <code>OEM</code>库的<code>c_townInfo</code>中(<code>c_townInfo</code>表事先不存在)</p>

<pre><code>SELECT * INTO  [OEM].[dbo].[c_townInfo] FROM [EEMS].[dbo].[Dec_TownInfo]
</code></pre>

      <div class="readall"><a href="/sqlserver-data-copy-cross-tables/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/tomcat-failed-start/">eclipse中"Tomcat v8.0 Server at localhost failed to start"解决以及安装方法</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年08月01日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#tomcat">tomcat</a>
      </p>
    </header>
    <div class="post-main">
      <h1>设置环境变量</h1>

<p>变量名：CATALINA_HOME
变量值：tomcat 安装的路径,如 “C:\apache-tomcat-8.0.9”</p>

<h1>安装 service服务 ：</h1>

<p>打开命令行提示符窗口</p>

<p>=> 进入Tomcat安装目录==> 进入bin目录下==>
输入：<code>service.bat install</code> 即可</p>

<p><img src="http://e.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=dd9b5538b23533faf1b6932b98e88c22/bd3eb13533fa828b625d41d5fe1f4134970a5a8e.jpg?referer=cab7f2d3ae6eddc47ff081cba684&amp;x=.jpg" alt="service" /></p>

<h1>在eclipse里面配置tomcat，如下图：</h1>

<p><img src="http://h.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=5c5b7e2dd70735fa95f04ebcae6a7e8e/962bd40735fae6cd8cca77570cb30f2442a70f8e.jpg?referer=5e34d014b01bb051d63386186985&amp;x=.jpg" alt="配置" /></p>

      <div class="readall"><a href="/tomcat-failed-start/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/jersey-sqlserver-hibernate4-spring3-angular/">用Jersey构建RESTful服务9--Jersey+SQLServer+Hibernate4.3+Spring3.2+AngularJS</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年07月31日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#javajerseyrestangularjs">javajerseyrestangularjs</a>
      </p>
    </header>
    <div class="post-main">
      <h1>一、总体说明</h1>

<p>本例运行演示了用 Jersey 构建 RESTful 服务中，如何集成 angular,用MVC分层的方式访问 RESTful 服务。</p>

<h1>二、环境</h1>

<ul>
<li>1.上上文的项目 <a href="(https://github.com/waylau/RestDemo/tree/master/jersey-demo7-sqlserver-hibernate-spring3">Demo7</a>)</li>
<li>2.angular 库 ,本例为1.2.3 版本</li>
<li>3.样式 bootstrap-3.1.1.min.js</li>
</ul>


<h1>三、配置</h1>

<p>1.完成项目结构</p>

<p><img src="http://h.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=07b98f30acc379317968862cdbffc678/f636afc379310a55cc5093c2b44543a98226108b.jpg?referer=334116001e950a7b2c227bf4508a&amp;x=.jpg" alt="配置" />
创建相应的目录结构</p>

<p>angularjs 、bootstrap 的js,css文件放别放入相应的目录，</p>

<p>在js目录下再创建 <code>app.js</code> 、<code>controller.js</code></p>

<p>在partials目录下再创建 <code>create.html</code>、 <code>list.html</code> 、 <code>detail.html</code></p>

<p>完整目录结构如下<img src="http://c.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=febe1487830a19d8cf03840003c1f3b6/6d81800a19d8bc3e83344bfc818ba61ea8d345c3.jpg?referer=96c30518d11b0ef435ffad6ea3c1&amp;x=.jpg" alt="结构" /></p>

<ol>
<li>在<code>list.html</code>填入如下内容,主要是显示用户列表<code>ng-repeat</code>为 angularjs 迭代器
``作用是数据绑定:</li>
</ol>


<pre><code class="html">
    &lt;div class="pull-right"&gt;
        &lt;a href="#/create" class="btn btn-default" title="Create"&gt;&lt;span class="glyphicon glyphicon-plus"&gt;&lt;/span&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;div class="page-header"&gt;
        &lt;h3&gt;Users&lt;/h3&gt;
    &lt;/div&gt;
    &lt;hr /&gt;
    &lt;li ng-repeat="user in users | filter:query | orderBy:orderProp"  &gt;

        &lt;div class="pull-right"&gt;
           &lt;a href="#/users/"  class="btn btn-xs btn-default" title="edit"&gt;
           &lt;span class="glyphicon glyphicon-pencil"&gt;&lt;/span&gt;&lt;/a&gt;
        &lt;/div&gt;
        &lt;h4&gt;userId: &lt;/h4&gt;
        &lt;p&gt;userName:&lt;a href="#/users/"&gt;&lt;/a&gt;   Age:&lt;/p&gt;
    &lt;hr /&gt;
    &lt;/li&gt;

    &lt;hr /&gt;
</code></pre>

<ol>
<li>修改<code>create.html</code>用来添加用户信息，<code>ng-model</code>是模型</li>
</ol>


<pre><code class="html">    &lt;div class="page-header"&gt;
        &lt;h3&gt;Create&lt;/h3&gt;
    &lt;/div&gt;

    &lt;form role="form" name="userForm"&gt;

     &lt;div class="row"&gt;&amp;nbsp;&lt;/div&gt;
     &lt;div class="row" ng-class="{'has-error': userForm.userId.$invalid}"&gt;
      &lt;div class="col-md-1"&gt;
        &lt;i ng-show="userForm.url.$error.required" 
          class="glyphicon glyphicon-pencil"&gt;&lt;/i&gt;
        &lt;label for="urlInput"&gt;userId&lt;/label&gt;
      &lt;/div&gt;
      &lt;div class="col-md-4"&gt;
        &lt;input 
          type="test" 
          class="form-control" id="urlInput"
          name="userId" ng-model="user.userId" required&gt; 
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="row"&gt;&amp;nbsp;&lt;/div&gt;

    &lt;div class="row" ng-class="{'has-error': userForm.userName.$invalid}"&gt;
      &lt;div class="col-md-1"&gt;
        &lt;i ng-show="userForm.userName.$error.required" 
          class="glyphicon glyphicon-pencil"&gt;&lt;/i&gt;
        &lt;label for="nameInput"&gt;userName&lt;/label&gt;
      &lt;/div&gt;
      &lt;div class="col-md-4"&gt;
        &lt;input 
          type="text" 
          class="form-control error" id="nameInput"
          name="userName" 
          ng-model="user.userName" 
          required&gt; 
      &lt;/div&gt;      
    &lt;/div&gt;

    &lt;div class="row"&gt;&amp;nbsp;&lt;/div&gt;
    &lt;div class="row" ng-class="{'has-error': userForm.url.$invalid}"&gt;
      &lt;div class="col-md-1"&gt;
        &lt;i ng-show="userForm.url.$error.required" 
          class="glyphicon glyphicon-pencil"&gt;&lt;/i&gt;
        &lt;label for="urlInput"&gt;age&lt;/label&gt;
      &lt;/div&gt;
      &lt;div class="col-md-4"&gt;
        &lt;input 
          type="text" 
          class="form-control" id="urlInput"
          name="age" ng-model="user.age" required&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div class="row" ng-hide="showConfirm"&gt;
      &lt;div class="col-md-5"&gt;
        &lt;a href="#users" class="btn"&gt;Cancel&lt;/a&gt;
        &lt;button 
          ng-click="add()" 
          ng-disabled="isClean() || userForm.$invalid"
          class="btn btn-primary"&gt;Save&lt;/button&gt;

      &lt;/div&gt;
    &lt;/div&gt;
</code></pre>

<ol>
<li><p>修改<code>detail.html</code>用来显示用户信息并提供修改、删除等功能
```html
<form role="form" name="userForm"></p>

<p>   <div class="row">&nbsp;</div>
   <div class="row" ng-class="{'has-error': userForm.userId.$invalid}">
    <div class="col-md-1">
      <i ng-show="userForm.url.$error.required"
        class="glyphicon glyphicon-pencil"></i>
      <label for="urlInput">userId</label>
    </div>
    <div class="col-md-4">
      <input
        type="test"
        class="form-control" id="urlInput"
        name="userId" ng-model="user.userId" required>
    </div>
  </div>
  <div class="row">&nbsp;</div></p>

<p>  <div class="row" ng-class="{'has-error': userForm.userName.$invalid}">
    <div class="col-md-1">
      <i ng-show="userForm.userName.$error.required"
        class="glyphicon glyphicon-pencil"></i>
      <label for="nameInput">userName</label>
    </div>
    <div class="col-md-4">
      <input
        type="text"
        class="form-control error" id="nameInput"
        name="userName"
        ng-model="user.userName"
        fend-focus="focusUserNameeInput"
        required>
    </div>    <br/>
  </div>
  <div class="row">&nbsp;</div>
  <div class="row" ng-class="{'has-error': userForm.url.$invalid}">
    <div class="col-md-1">
      <i ng-show="userForm.url.$error.required"
        class="glyphicon glyphicon-pencil"></i>
      <label for="urlInput">age</label>
    </div>
    <div class="col-md-4">
      <input
        type="text"
        class="form-control" id="urlInput"
        name="age" ng-model="user.age" required>
    </div>
  </div></p>

<p>  <div class="row" ng-hide="showConfirm">&nbsp;</div></p>

<p>  <div class="row" ng-hide="showConfirm">
    <div class="col-md-5">
      <a href="#users" class="btn">Cancel</a>
      <button
        ng-click="save()"
        ng-disabled="isClean() || userForm.$invalid"
        class="btn btn-primary">Save</button>
      <button
        ng-click="remove()"
        ng-show="user.userId"
        class="btn btn-danger">Delete</button>
    </div>
  </div></p>

<p></form>
```</p></li>
<li><p>修改<code>index.html</code>作为主页面,嵌入其他子页面，<code>ng-app</code>声明这个是模块，<code>ng-controller</code>说明他的控制器叫<code>ListCtrl</code>,<code>ng-view</code>用来存放子视图（页面）。</p></li>
</ol>


<pre><code class="html">    &lt;!doctype html&gt;
    &lt;html ng-app="appMain" ng-controller="ListCtrl"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"/&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
        &lt;link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/&gt;
    &lt;/head&gt;
    &lt;body &gt;
        &lt;!-- navbar --&gt;
        &lt;div class="container ng-view"&gt;&lt;/div&gt;
        &lt;!-- footer --&gt;
        &lt;div id="footer" class="hidden-xs"&gt;
          &lt;div class="container"&gt;
            &lt;p class="text-muted"&gt;
              Project Example - by &lt;a href="http://www.waylau.com" target="_blank"&gt;www.waylau.com&lt;/a&gt; | 
              &lt;a href="https://github.com/waylau" target="_blank"&gt;GitHub Project&lt;/a&gt;
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;script src="js/bootstrap-3.1.1.min.js"&gt;&lt;/script&gt;
        &lt;script src="js/angular-1.2.3.js"&gt;&lt;/script&gt;
        &lt;script src="js/angular-resource-1.2.3.js"&gt;&lt;/script&gt;
        &lt;script src="js/angular-route-1.2.3.js"&gt;&lt;/script&gt;
        &lt;script src="js/angular-cookies-1.2.3.js"&gt;&lt;/script&gt;

        &lt;script src="js/app.js"&gt;&lt;/script&gt;
        &lt;script src="js/controller.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>

<ol>
<li>修改<code>app.js</code> ，声明模块<code>appMain</code>,提供路由功能，说明了调转到哪个页面，用哪个控制器</li>
</ol>


<pre><code class="javascript">
    angular.module('appMain', ['ngRoute']).config(['$routeProvider', function ($routeProvider) {
        $routeProvider.
            when('/users', {templateUrl: 'partials/list.html', controller: ListCtrl}).
            when('/users/:userId', {templateUrl: 'partials/detail.html', controller: DetailCtrl}).
            when('/create', {
                templateUrl: 'partials/create.html',
                controller: CreateController
            }).
            otherwise({redirectTo: '/users'});
    }]);
</code></pre>

<ol>
<li>修改<code>controller.js</code>，控制器。主要是对业务逻辑的操作，常见的CURD功能，http访问RESTful接口，并且返回数据</li>
</ol>


<pre><code class="javascript   ">    var url = 'http://localhost:8089/RestDemo/rest';

    function ListCtrl($scope, $http) {
        $http.get( url + '/users' ).success(function(data) {
            $scope.users = data;
        });

        $scope.orderProp = 'age';
    }

    function DetailCtrl($scope, $routeParams, $http) {

        $http.get( url + '/users/'+$routeParams.userId).success(function(data) {
            $scope.user = data;
        });

        $scope.save = function() {
            $http.put( url + '/users',  $scope.user).
            success(function(data, status, headers, config){
                $location.path('/');
            }).error(function(data, status, headers, config){
                alert("error"+status);
            }) ;
        };

        $scope.remove =  function(){
            $http({
                method:'DELETE',
                url: url + '/users/'+  $scope.user.userId ,
            })
            .success(function(data, status, headers, config){
                $location.path('/');
            }).error(function(data, status, headers, config){
                alert("error"+status);
            }) ;
        };
    }

    function CreateController($scope, $http) {


        $scope.add = function() {
            $http.post( url + '/users',  $scope.user).
            success(function(data, status, headers, config){
                $location.path('/');
            }).error(function(data, status, headers, config){
                alert("error"+status);
            }) ;
        };
    }
</code></pre>

<h1>四、运行</h1>

<p>1.先运行项目</p>

<p>2.可以进行CURD操作</p>

<p><img src="http://g.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=78def5b7c81349547a1ee8616675e365/8cb1cb1349540923fb552e489158d109b3de49c3.jpg?referer=eb100a8d4410b912e6d6c3ceb7c1&amp;x=.jpg" alt="LIST" /></p>

<p><img src="http://b.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=de95dcc47e1ed21b7dc92ee09d55acf9/a5c27d1ed21b0ef442d4d568dec451da81cb3ec3.jpg?referer=f6c201370955b319c5eeb7457ac2&amp;x=.jpg" alt="DETAIL" /></p>

<p><em>PS</em>:本案例力求简单把 angularjs 访问 RESTful 服务展示出来，在Chrome,firefox,IE上做过测试。</p>

<p><strong>本章源码</strong>：<a href="jersey-demo9-sqlserver-hibernate-spring3-angularjs">jersey-demo9-sqlserver-hibernate-spring3-angularjs</a></p>

      <div class="readall"><a href="/jersey-sqlserver-hibernate4-spring3-angular/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/jersey-sqlserver-hibernate4-spring3-jquery/">用Jersey构建RESTful服务8--Jersey+SQLServer+Hibernate4.3+Spring3.2+jquery</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年07月28日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#javajerseyrestjquery">javajerseyrestjquery</a>
      </p>
    </header>
    <div class="post-main">
      <h1>一、总体说明</h1>

<p>本例运行演示了用 Jersey 构建 RESTful 服务中，如何集成 jQuery,用html作为客户端访问 RESTful 服务。</p>

<h1>二、环境</h1>

<ul>
<li>1.上文的项目RestDemo</li>
<li>2.jQuery 库 ,本例为1.7.1版本

<h1>三、配置</h1>

<p><img src="http://a.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=b11637cc38c79f3d8be1e4358a9abc2c/71cf3bc79f3df8dca92bfda2ce11728b471028ea.jpg?referer=7798482741a7d933e6bfd14388a8&amp;x=.jpg" alt="配置" /></p></li>
<li><p>创建 jQuery 客户端的项目结构，在<code>WebContent</code>创建<code>js</code>,<code>css</code>两个目录，并把jQuery 库 放入<code>js</code>目录下，并在该目录下创建<code>main,js</code>空文件</p></li>
<li><p>在<code>WebContent</code>创建<code>index.html</code>:</p></li>
</ul>


<pre><code class="xml">    &lt;!DOCTYPE HTML&gt;
    &lt;html&gt;
    &lt;head&gt;
    &lt;title&gt;jquery Demo (人员管理系统)&lt;/title&gt;
    &lt;meta charset="utf-8"/&gt;
    &lt;link rel="stylesheet" href="css/styles.css" /&gt;

    &lt;script src="js/jquery-1.7.1.min.js"&gt;&lt;/script&gt;
    &lt;script src="js/main.js"&gt;&lt;/script&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div class="header"&gt;

            &lt;button id="btnClear"&gt;Clear&lt;/button&gt;
            &lt;button id="btnRefreash"&gt;Refreash&lt;/button&gt;
            更多实例访问：&lt;a href="http://www.waylau.com" &gt;www.waylau.com&lt;/a&gt;
        &lt;/div&gt;


        &lt;div class="leftArea"&gt;
            &lt;ul id="userList"&gt;&lt;/ul&gt;
        &lt;/div&gt;

        &lt;form id="wineForm"&gt;

            &lt;div class="mainArea"&gt;

                &lt;label&gt;Id:&lt;/label&gt; &lt;input id="userId" name="userId" type="text"  required/&gt;

                &lt;label&gt;Name:&lt;/label&gt; &lt;input type="text" id="userName" name="userName" required&gt; 
                &lt;label&gt;Age:&lt;/label&gt; &lt;input  type="text" id="age" name="age" required/&gt;

                &lt;button id="btnAdd"&gt;Add&lt;/button&gt;
                &lt;button id="btnSave"&gt;Save&lt;/button&gt;
                &lt;button id="btnDelete"&gt;Delete&lt;/button&gt;
            &lt;/div&gt;

        &lt;/form&gt;

    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>

<ol>
<li>修改<code>main.js</code></li>
</ol>


<pre><code class="javascript">    // The root URL for the RESTful services
    var rootURL = 'http://localhost:8089/RestDemo/rest/users';

    var currentUser;

    // Retrieve wine list when application starts 
    findAll();

    // Nothing to delete in initial application state
    $('#btnDelete').hide();

    $('#btnAdd').click(function() {
        addUser();
        return false;
    });

    $('#btnSave').click(function() {

        updateUser();
        return false;
    });

    $('#btnClear').click(function() {
        newUser();
        return false;
    });


    $('#btnDelete').click(function() {
        deleteUser();
        return false;
    });

    $('#userList a').live('click', function() {
        findById($(this).data('identity'));
    });

    $('#btnRefreash').click(function() {
        findAll();
        return false;
    });


    function newUser() {
        $('#btnDelete').hide();
        currentUser = {};
        renderDetails(currentUser); // Display empty form
    }

    function findAll() {
        console.log('findAll');
        $.ajax({
            type: 'GET',
            url: rootURL,
            dataType: "json", // data type of response
            success: renderList
        });
    }


    function findById(id) {
        console.log('findById: ' + id);
        $.ajax({
            type: 'GET',
            url: rootURL + '/' + id,
            dataType: "json",
            success: function(data){
                $('#btnDelete').show();

                console.log('findById success: ' + data.userName);
                currentUser = data;
                renderDetails(currentUser);
            }

        });
    }

    function addUser() {
        console.log('addUser');
        $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: rootURL,
            dataType: "json",
            data: formToJSON(),
            success: function(data, textStatus, jqXHR){
                alert('User created successfully');
                $('#btnDelete').show();
                $('#userId').val(data.userId);
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert('addUser error: ' + textStatus);
            }
        });
    }

    function updateUser() {
        console.log('updateUser');
        $.ajax({
            type: 'PUT',

            contentType: 'application/json',
            url: rootURL,
            dataType: "json",
            data: formToJSON(),

            success: function(data, textStatus, jqXHR){
                alert('User updated successfully');
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert('updateUser error: ' + textStatus);
            }
        });
    }

    function deleteUser() {
        console.log('deleteUser');
        $.ajax({
            type: 'DELETE',
            url: rootURL + '/' + $('#userId').val(),
            success: function(data, textStatus, jqXHR){
                alert('user deleted successfully');
            },
            error: function(jqXHR, textStatus, errorThrown){
                alert('delete user error');
            }
        });
    }

    function renderList(data) {
        // JAX-RS serializes an empty list as null, and a 'collection of one' as an object (not an 'array of one')
        var list = data == null ? [] : (data instanceof Array ? data : [data]);

        $('#userList li').remove();
        $.each(list, function(index, data) {
            $('#userList').append('&lt;li&gt;&lt;a href="#" data-identity="' + data.userId + '"&gt;'+data.userName+'&lt;/a&gt;&lt;/li&gt;');
        });
    }

    function renderDetails(data) {
        $('#userId').val(data.userId);
        $('#userName').val(data.userName);
        $('#age').val(data.age);

    }

    // Helper function to serialize all the form fields into a JSON string
    function formToJSON() {
        var userId = $('#userId').val();
        return JSON.stringify({
            "userId": userId == "" ? null : userId, 
            "userName": $('#userName').val(), 
            "age": $('#age').val() 
            });
    }
</code></pre>

<ol>
<li>在<code>css</code>目录下创建<code>styles.css</code>文件</li>
</ol>


<pre><code class="css">    * {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 18px;
    }

    .header {
        padding-top: 5px;

    }

    .leftArea {
        position: absolute;
        left: 10px;
        top: 70px;
        bottom: 20px;
        width: 260px;
        border:solid 1px #CCCCCC;
        overflow-y: scroll;
    }

    .mainArea {
        position: absolute;
        top: 70px;
        bottom: 20px;
        left:300px;
        overflow-y: scroll;
        width:300px;
    }

    .rightArea {
        position: absolute;
        top: 70px;
        bottom: 20px;
        left:650px;
        overflow-y: scroll;
        width:270px;
    }

    ul {
        list-style-type: none;
        padding-left: 0px;
        margin-top: 0px;
    }

    li a { 
        text-decoration:none;
        display: block;
        color: #000000;
        border-bottom:solid 1px #CCCCCC;
        padding: 8px;
    }

    li a:hover {
        background-color: #4B0A1E;
        color: #BA8A92;
    }

    input, textarea {
      border:1px solid #ccc;
      min-height:30px;
      outline: none;
    }

    .mainArea input {
      margin-bottom:15px;
      margin-top:5px;
      width:280px;
    }

    textarea {
        margin-bottom:15px;
        margin-top:5px;
        height: 200px;
        width:250px;
    }

    label {
        display:block;
    }

    button {
        padding:6px;
    }


    #searchKey {
        width:160px;
    }
</code></pre>

<h1>四、运行</h1>

<p>1.先运行项目</p>

<p>2.可以进行CURD操作
<img src="http://f.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=464185feff039245a5b5e10ab7afd5ff/c2fdfc039245d68851b0c197a7c27d1ed21b2456.jpg?referer=ce74bdeea864034f56daf736844c&amp;x=.jpg" alt="CURD" /></p>

<p><em>PS</em>:本案例力求简单把jquery访问 RESTful 服务展示出来，代码只在Chrome上做过测试。</p>

<p><strong>本章源码</strong>：<a href="https://github.com/waylau/RestDemo/tree/master/jersey-demo8-sqlserver-hibernate-spring3-jquery">https://github.com/waylau/RestDemo/tree/master/jersey-demo8-sqlserver-hibernate-spring3-jquery</a></p>

      <div class="readall"><a href="/jersey-sqlserver-hibernate4-spring3-jquery/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/spring-4-third-party-libraries-relationship/">Spring 4.x 与可选的第三方库的关系</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年07月26日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#javaspring">javaspring</a>
      </p>
    </header>
    <div class="post-main">
      <p>1.<code>Spring 4</code>唯一的外部强制性的依库是 jakarta <code>commons-logging</code></p>

<p>2.<code>Spring 4</code>与可选的第三方库一般只支持在2010年底或后来发布的版本：特别是，<code>Hibernate 3.6+</code>, <code>EhCache 2.1+</code>, <code>Quartz 1.8+</code>, <code>Groovy 1.8+</code>, and <code>Joda-Time 2.0+</code>。作为另外，<code>Spring 4</code> 要求最近的<code>Hibernate Validator 4.3 +</code>，并支持<code>Jackson 2.0+</code> （<code>Jackson 1.8/1.9</code>只保留对 <code>Spring 3.2</code> 支持；现在是处在废弃的状态）。</p>

<p>3.<code>Spring 4</code> 对低支持到 <code>JDK 6 update 18</code>，在新项目中，最好用<code>Java 7/8</code>.</p>

<p>4.<code>Java EE 6/7</code>现在被认为是<code>Spring 4</code>的最低标准。建议使用<code>JPA 2</code>
和<code>Servlet 3</code>规范。为了兼容<code>Google
App Engine</code>和老旧的应用，它可以部署 <code>Spring4</code>应用到<code>servlet
2.5</code>环境。然而，强烈建议用 <code>Servlet 3+</code>作为测试环境</p>

<p>5.<code>Gradle</code>作为项目构建工具</p>

<p>参考：spring-framework-reference (<a href="http://docs.spring.io/spring/docs/4.0.6.RELEASE/spring-framework-reference/htmlsingle/">v4.0.6Release</a>)</p>

      <div class="readall"><a href="/spring-4-third-party-libraries-relationship/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/jersey-sqlserver-hibernate4-spring3/">用Jersey构建RESTful服务7--Jersey+SQLServer+Hibernate4.3+Spring3.2</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2014年07月25日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#javajerseyrestspring">javajerseyrestspring</a>
      </p>
    </header>
    <div class="post-main">
      <h1>一、总体说明</h1>

<p>本例运行演示了用 Jersey 构建 RESTful 服务中，如何集成 Spring3</p>

<h1>二、环境</h1>

<ul>
<li>1.上文的项目RestDemo</li>
<li>2.Spring及其他相关的jar ,导入项目
<img src="http://h.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=d3d08e3730fa828bd5239de6cd243009/b03533fa828ba61ec73dc21d4234970a304e5934.jpg?referer=743b926cdec451daafe138dba7ea&amp;x=.jpg" alt="Spring及其他相关的jar" /></li>
</ul>


<h1>三、配置</h1>

<p>1.根目录下下创建 Spring 的配置文件<code>applicationContext.xml</code>；
配置如下：
    &lt;?xml version="1.0" encoding="UTF-8"?></p>

<pre><code>&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context.xsd"
        &gt;
    &lt;!-- 激活那些已经在g容器里注册过的bean --&gt;    
    &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt;

    &lt;!-- 在容器中注入bean --&gt;
    &lt;bean id="UserServiceImpl" class="com.waylau.rest.service.impl.UserServiceImpl"/&gt;
    &lt;bean id="UserDaoImpl" class="com.waylau.rest.dao.impl.UserDaoImpl"/&gt;

&lt;/beans&gt;
</code></pre>

<p>2.在<code>com.waylau.rest.service</code>和<code>com.waylau.rest.service.impl</code>下分别增加 UserService 和 UserServiceImpl。</p>

<p><code>UserService.java</code></p>

<pre><code>package com.waylau.rest.service;

import java.util.List;

import com.waylau.rest.bean.User;


/**
 * User Service 接口
 * @author waylau.com
 * 2014-7-25
 */
public interface UserService {

    public User getUserById(String id);

    public boolean deleteUserById(String id);

    public boolean createUser(User user);

    public boolean updateUser(User user);

    public List&lt;User&gt; getAllUsers();
}
</code></pre>

<p><code>UserServiceImpl.java</code></p>

<pre><code>package com.waylau.rest.service.impl;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.waylau.rest.bean.User;
import com.waylau.rest.dao.impl.UserDaoImpl;
import com.waylau.rest.service.UserService;
/**
 * User Service 接口实现
 * @author waylau.com
 * 2014-7-25
 */
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDaoImpl userDaoImpl;

    public UserServiceImpl() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public User getUserById(String id) {
        return userDaoImpl.getUserById(id);
    }

    @Override
    public boolean deleteUserById(String id) {
        return userDaoImpl.deleteUserById(id);
    }

    @Override
    public boolean createUser(User user) {
        return userDaoImpl.createUser(user);
    }

    @Override
    public boolean updateUser(User user) {
        return userDaoImpl.updateUser(user);
    }

    @Override
    public List&lt;User&gt; getAllUsers() {
        return userDaoImpl.getAllUsers();
    }

}
</code></pre>

<p>3.修改 <code>UserResource.java</code></p>

<pre><code>package com.waylau.rest.resources;

import java.util.ArrayList;
import java.util.List;
import java.util.logging.Logger;

import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.Consumes;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;

import org.springframework.beans.factory.annotation.Autowired;

import com.waylau.rest.bean.User;
import com.waylau.rest.service.impl.UserServiceImpl;

/**
 * 用户资源
 * @author waylau.com
 * 2014-7-26
 */
@Path("/users")
public class UserResource {
    private static final Logger LOGGER = Logger.getLogger(UserResource.class.getName());

    @Autowired
    private UserServiceImpl userServiceImpl;

    public UserResource() {
        LOGGER.fine("UserResource()");
    }

    /**
     * 增加
     * @param user
     */
    @POST
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public void createUser(User user)
    {
        userServiceImpl.createUser(user);
    }

    /**
     * 删除
     * @param id
     */
    @DELETE
    @Path("{id}")
    public void deleteUser(@PathParam("id")String id){
        userServiceImpl.deleteUserById(id);
    }

    /**
     * 修改
     * @param user
     */
    @PUT
    @Consumes(MediaType.APPLICATION_XML)
    public void updateUser(User user){
        userServiceImpl.updateUser(user);
    }

    /**
     * 根据id查询
     * @param id
     * @return
     */
    @GET
    @Path("{id}")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public User getUserById(@PathParam("id") String id){
        User u = userServiceImpl.getUserById(id);
        return u;
    }

    /**
     * 查询所有
     * @return
     */
    @GET
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public List&lt;User&gt; getAllUsers(){     
        List&lt;User&gt; users = new ArrayList&lt;User&gt;();   
        users = userServiceImpl.getAllUsers();
        return users;
    }
}
</code></pre>

<p>4.修改web.xml,插入</p>

<pre><code>&lt;module-name&gt;RestDemo&lt;/module-name&gt;

&lt;listener&gt;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

&lt;context-param&gt;
  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
  &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre>

<h1>四、运行</h1>

<p>1.先运行项目</p>

<p>2.运行UserClient.java测试，控制台输出如下</p>

<pre><code>****增加用户addUser****
****查询所有getAllUsers****
[{"userId":"002","userName":"sdfs","age":"23"},{"userId":"003","userName":"sdfs","age":"23"},{"userId":"004","userName":"sdfs","age":"23"},{"userId":"005","userName":"sdfs","age":"23"},{"userId":"006","userName":"Susan","age":"21"},{"userId":"007","userName":"sdfs","age":"23"},{"userId":"ds","userName":"ds","age":"ds"}]
****修改用户updateUser****
****根据id查询用户****
006Susan33
****查询所有getAllUsers****
[{"userId":"002","userName":"sdfs","age":"23"},{"userId":"003","userName":"sdfs","age":"23"},{"userId":"004","userName":"sdfs","age":"23"},{"userId":"005","userName":"sdfs","age":"23"},{"userId":"006","userName":"Susan","age":"33"},{"userId":"007","userName":"sdfs","age":"23"},{"userId":"ds","userName":"ds","age":"ds"}]
****删除用户****
****查询所有getAllUsers****
[{"userId":"002","userName":"sdfs","age":"23"},{"userId":"003","userName":"sdfs","age":"23"},{"userId":"004","userName":"sdfs","age":"23"},{"userId":"005","userName":"sdfs","age":"23"},{"userId":"007","userName":"sdfs","age":"23"},{"userId":"ds","userName":"ds","age":"ds"}]
</code></pre>

<p><strong>本章源码（含jar包）</strong>：<a href="https://github.com/waylau/RestDemo/tree/master/jersey-demo7-sqlserver-hibernate-spring3">https://github.com/waylau/RestDemo/tree/master/jersey-demo7-sqlserver-hibernate-spring3</a></p>

      <div class="readall"><a href="/jersey-sqlserver-hibernate4-spring3/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="pagination">
  
  
  <a class="pagination-item newer" href="/page/4"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;上一页</a>
  
    

    
      <a href="/">1</a>
      

    
      
      <a href="/page/2">2</a>
      
    
      
      <a href="/page/3">3</a>
      
    
      
      <a href="/page/4">4</a>
      
    
      
      <span class="current-page">5</span>
      
    
      
      <a href="/page/6">6</a>
      
    
      
      <a href="/page/7">7</a>
      
    
      
      <a href="/page/8">8</a>
      
    
      
      <a href="/page/9">9</a>
      
    
      
      <a href="/page/10">10</a>
      
    
      
      <a href="/page/11">11</a>
      
    
      
      <a href="/page/12">12</a>
      
    
      
      <a href="/page/13">13</a>
      
    
      
      <a href="/page/14">14</a>
      
    
      
      <a href="/page/15">15</a>
      
    
      
      <a href="/page/16">16</a>
      
    
      
      <a href="/page/17">17</a>
      
    
      
      <a href="/page/18">18</a>
      
    
      
      <a href="/page/19">19</a>
      
    
      
      <a href="/page/20">20</a>
      
    
      
      <a href="/page/21">21</a>
      
    
      
      <a href="/page/22">22</a>
      
    
  (共129篇)

  
  <a class="pagination-item older" href="/page/6">下一页&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>
  
</div>

    <footer>Copyright&nbsp;&copy;&nbsp;2014 <a href="http://www.waylau.com">Way Lau's Blog</a><br/><i class="fa fa-cogs" style="color:blueviolet;">&nbsp;</i>Powered by <a href="https://github.com/waylau/jekyll-theme-blog" target="_blank">jekyll-theme-blog</a></footer>
    </div>


  </div>    
  <div id="top"><a id="rocket" href="javascript:;" title="返回顶部"><i></i></a></div>
  


</body>
</html>