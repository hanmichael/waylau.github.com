<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Way Lau's Personal Site | www.waylau.com">
  <meta name="author" content="Way Lau">
  <meta name="keywords" content="Way Lau's Personal Site | www.waylau.com, Way Lau's Blog, 技术改变世界！, Way Lau">
  <title>Way Lau's Personal Site | www.waylau.com</title>
  <link rel="canonical" href="http://www.waylau.com">
  <link rel="icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/res/css/public.css">
  <link rel="stylesheet" href="/res/css/light.css">
  <script src="/res/js/light.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?28cf5fa48a599e39c5cc760931de942f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="/res/img/icon.png" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Way Lau's Blog</a></h1>
  <h2 class="sub-title">技术改变世界！</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/timing/"><i class="fa fa-clock-o"></i>&nbsp;时光机</a></li>
    
      <li><a href="/categories/"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/tags/"><i class="fa fa-bookmark"></i>&nbsp;标签</a></li>
    
      <li><a href="http://labs.waylau.com/"><i class="fa fa-building"></i>&nbsp;示例</a></li>
    
      <li><a href="/books/"><i class="fa fa-book"></i>&nbsp;书籍</a></li>
    
      <li><a href="/about/"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/waylau521" title="新浪微博" target="_blank"><i class="fa fa-weibo "></i></a>
    <a class="github" href="https://github.com/waylau" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="twitter" href="https://twitter.com/waylau521" title="Twitter" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
  <div id="license">
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="本站所有作品采用：&#10;知识共享《署名 非商业性使用 相同方式共享 3.0》&#10;进行许可" >
    <img alt="License" height="31" width="88" src="/res/img/license.png" /></a>
  </div>
</div>
    <div class="main">
    
<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/choice-of-mountain-bike-riding-equipment/">自行车骑行装备的选择</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月24日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#outdoor">outdoor</a>
      </p>
    </header>
    <div class="post-main">
      <p>一、骑行人员装备
从上至下，依次为：
1、骑行头盔：为轻质头盔，以高强度泡沫压制而成，用于头部防护；
2、骑行头巾：多种用途，主要用于排汗遮阳阻隔灰尘；
3、骑行眼镜：按照佩带时间段，镜片可分为多种颜色，一般为深灰色、黄色、白色。深灰色-适合于中午阳光照射充足的时间佩带，以阻隔刺眼的眼光；黄色-适合清晨、黄昏阳光照射相对较暗的时候佩带；白色，适合天气阴暗或晚上佩带。其主要功能在于，阻隔阳光、阻隔风尘；
4、骑行服：骑行人员专用衣服，由多种面料制作而成，可按需选用。其功能主要功能为保暖、速干、透气；
5、骑行袖套：又称为臂套，主要和短袖骑行服搭配穿着，方便拆解，其主要功能为保暖、防晒；
6、骑行手套：为骑行人员专用手套，有半指与全指之分，手掌部位做加厚处理，高档骑行手套均垫有硅胶层，主要用于摔车时，减少伤害，防止擦破手；
7、骑行背包或腰包：骑行背包并没有做特殊规定，主要用于盛装骑行过程所需之物，满足需求即可，并不做特殊要求；
8、骑行裤：为骑行者专用裤子，有长短之分并在臀部配有坐垫，其功能主要为高弹减少腿部于自行车之间的摩擦，同时配备的坐垫减少长时间骑行屁股会疼的状况，提高骑行的舒适性；
9、骑行腿套：如直筒一般，与骑行短裤搭配使用，方便拆解，主要功能为保暖、防晒；
10、骑行袜：为骑行者专用袜子，按照COOLMAX含量可分为多种，骑行者可按照骑行时间的长短和骑行活动的强度来选用适合穿着的骑行袜；
11、绑腿：又名束带主要用于扎结裤腿角，防止裤腿绞进链条，以保障骑行的安全；
12、骑行鞋：为骑行者专用鞋子，同样可分为多种，有山地骑行鞋与公路骑行鞋之分，可按照所骑自行车款式进行选择，如自行车配备专用脚蹬，则骑行鞋必须选用锁鞋；
13、骑行鞋套：骑行鞋套用于骑行锁鞋的搭配，有减少风阻，防污保暖等用途。</p>

<p>&nbsp;</p>

<p>二、车载装备
从自行车前头往后依次有：
1、打气桶：一般为便携装，安置于前叉部位；
2、车首包：又名车把包、车前包常见于山地车装备中。适合长途骑行装载物品之用；
3、车灯\尾灯：常见于夜间骑行的自行车中，照明警示用；
4、喇叭：有气喇叭与电喇叭之分，可按需取用，功能并无太大差别，只是发声装置不同；
5、三角包：隶属于包裹类，作用同于车首包，只是安装部位不同，另还有尾包-安装于自行车座立管部位，驮包安装于自行车后坐部位；车架包，位于车头与车管部位
6、水壶：有多种可选，无需专门配备，主要用于盛装在骑行过程中所需要饮用的水。
7. 水壶架：放置水壶
8. 码表：显示里程，测速
9. 扶把（副把）：减少手部疲劳
10.货架（后车架）：用于长途骑行装载驮包用
11.挡泥板：雨天必备
12.硅胶坐垫：保护小DD，长途适用
13.护链贴：防止链条脱落与车架激烈摩擦
14.车锁：不多说
15.修补工具：翘胎棒、摩擦片、胶水、补胎片、内六角、一字十字螺丝刀、扳手。。太多了，见下图</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

      <div class="readall"><a href="/choice-of-mountain-bike-riding-equipment/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/about-dom4j-example/">DOM4J介绍与代码示例</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月18日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#java">java</a>
      </p>
    </header>
    <div class="post-main">
      <p>原文摘自：http://zhangjunhd.blog.51cto.com/113473/126310</p>

<p>DOM4J是dom4j.org出品的一个开源XML解析包。Dom4j是一个易用的、开源的库，用于XML，XPath和XSLT。它应用于Java平台，采用了Java集合框架并完全支持DOM，SAX和JAXP。</p>

<div>DOM4J下载jar包：http://downloads.sourceforge.net/dom4j/dom4j-1.6.1.jar</div>


<div>JAXEN（对XPath的支持）：http://dist.codehaus.org/jaxen/distributions/jaxen-1.1.1.zip</div>


<div><b>1.DOM4J</b><b>主要接口</b><b></b></div>


<div>DOM4J主要接口都在org.dom4j这个包里定义。</div>


<div></div>


<div></div>


<div>-Node为所有的dom4j中XML节点定义了多态行为；</div>


<div></div>


<div>-Branch为能够包含子节点的节点如XML元素(Element)和文档(Docuemnts)定义了一个公共的行为；</div>


<div>|-Element 定义XML 元素；</div>


<div>|-Document定义了XML文档；</div>


<div></div>


<div>-DocumentType 定义XML DOCTYPE声明；</div>


<div>-Entity定义 XML entity；</div>


<div>-Attribute定义了XML的属性；</div>


<div>-ProcessingInstruction 定义 XML 处理指令；</div>


<div></div>


<div>-CharacterData是一个标识借口，标识基于字符的节点。如CDATA，Comment, Text；</div>


<div>|- CDATA 定义了XML CDATA 区域；</div>


<div>|-Text 定义XML 文本节点；</div>


<div>|- Comment 定义了XML注释的行为；</div>


<div><b>2.</b><b>创建</b><b>XML</b><b>文档</b><b></b></div>


<div>示例xml：students.xml</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left">&lt;?xml version=<i>"1.0"</i> encoding=<i>"UTF-8"</i>?&gt;</div>
<div align="left">&lt;?xml-stylesheet type=<i>"text/xsl"</i> href=<i>"students.xsl"</i>?&gt;</div>
<div align="left">&lt;students&gt;</div>
<div align="left">&lt;!--A Student Catalog--&gt;</div>
<div align="left">&lt;student sn=<i>"01"</i>&gt;</div>
<div align="left">&lt;name&gt;sam&lt;/name&gt;</div>
<div align="left">&lt;age&gt;18&lt;/age&gt;</div>
<div align="left">&lt;/student&gt;</div>
<div align="left">&lt;student sn=<i>"02"</i>&gt;</div>
<div align="left">&lt;name&gt;lin&lt;/name&gt;</div>
<div align="left">&lt;age&gt;20&lt;/age&gt;</div>
<div align="left">&lt;/student&gt;</div>
<div>&lt;/students&gt;</div></td>
</tr>
</tbody>
</table>


<div></div>


<div>下面是用dom4j创建上述文档，通过两种方式创建，一种是调用dom4j提供的方法，一种是通过字符串转换。</div>


<div>XmlGen.java</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>import</b> java.io.File;</div>
<div align="left"><b>import</b> java.io.FileWriter;</div>
<div align="left"><b>import</b> java.io.IOException;</div>
<div align="left"><b>import</b> java.util.HashMap;</div>
<div align="left"><b>import</b> java.util.Map;</div>
<div align="left"></div>
<div align="left"><b>import</b> org.dom4j.Document;</div>
<div align="left"><b>import</b> org.dom4j.DocumentException;</div>
<div align="left"><b>import</b> org.dom4j.DocumentHelper;</div>
<div align="left"><b>import</b> org.dom4j.Element;</div>
<div align="left"><b>import</b> org.dom4j.io.XMLWriter;</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>class</b> XmlGen {</div>
<div align="left"><b>public</b> Document generateDocumentByMethod() {</div>
<div align="left">Document document = DocumentHelper.<i>createDocument</i>();</div>
<div align="left">// ProcessingInstruction</div>
<div align="left">Map&lt;String, String&gt; inMap = <b>new</b> HashMap&lt;String, String&gt;();</div>
<div align="left">inMap.put("type", "text/xsl");</div>
<div align="left">inMap.put("href", "students.xsl");</div>
<div align="left">document.addProcessingInstruction("xml-stylesheet", inMap);</div>
<div align="left">// root element</div>
<div align="left">Element studentsElement = document.addElement("students");</div>
<div align="left">studentsElement.addComment("An Student Catalog");</div>
<div align="left">// son element</div>
<div align="left">Element stuElement = studentsElement.addElement("student");</div>
<div align="left">stuElement.addAttribute("sn", "01");</div>
<div align="left">Element nameElement = stuElement.addElement("name");</div>
<div align="left">nameElement.setText("sam");</div>
<div align="left">Element ageElement = stuElement.addElement("age");</div>
<div align="left">ageElement.setText("18");</div>
<div align="left">// son element</div>
<div align="left">Element anotherStuElement = studentsElement.addElement("student");</div>
<div align="left">anotherStuElement.addAttribute("sn", "02");</div>
<div align="left">Element anotherNameElement = anotherStuElement.addElement("name");</div>
<div align="left">anotherNameElement.setText("lin");</div>
<div align="left">Element anotherAgeElement = anotherStuElement.addElement("age");</div>
<div align="left">anotherAgeElement.setText("20");</div>
<div align="left"></div>
<div align="left"><b>return</b> document;</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> Document generateDocumentByString() {</div>
<div align="left">String text = "&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;" +</div>
<div align="left">"&lt;?xml-stylesheet type=\"text/xsl\" href=\"students.xsl\"?&gt;" +</div>
<div align="left">"&lt;students&gt;&lt;!--An Student Catalog--&gt; &lt;student sn=\"01\"&gt;" +</div>
<div align="left">"&lt;name&gt;sam&lt;/name&gt;&lt;age&gt;18&lt;/age&gt;&lt;/student&gt;&lt;student sn=\"02\"&gt;" +</div>
<div align="left">"&lt;name&gt;lin&lt;/name&gt;&lt;age&gt;20&lt;/age&gt;&lt;/student&gt;&lt;/students&gt;";</div>
<div align="left">Document document = <b>null</b>;</div>
<div align="left"><b>try</b> {</div>
<div align="left">document = DocumentHelper.<i>parseText</i>(text);</div>
<div align="left">} <b>catch</b> (DocumentException e) {</div>
<div align="left">e.printStackTrace();</div>
<div align="left">}</div>
<div align="left"><b>return</b> document;</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> saveDocument(Document document, File outputXml) {</div>
<div align="left"><b>try</b> {</div>
<div align="left">// 美化格式</div>
<div align="left">OutputFormat format = OutputFormat.<i>createPrettyPrint</i>();</div>
<div align="left">/*// 缩减格式</div>
<div align="left">OutputFormat format = OutputFormat.createCompactFormat();*/</div>
<div align="left">/*// 指定XML编码</div>
<div align="left">format.setEncoding("GBK");*/</div>
<div align="left">XMLWriter output = <b>new</b> XMLWriter(<b>new</b> FileWriter(outputXml), format);</div>
<div align="left">output.write(document);</div>
<div align="left">output.close();</div>
<div align="left">} <b>catch</b> (IOException e) {</div>
<div align="left">System.<i>out</i>.println(e.getMessage());</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>static</b> <b>void</b> main(String[] argv) {</div>
<div align="left">XmlGen dom4j = <b>new</b> XmlGen();</div>
<div align="left">Document document = <b>null</b>;</div>
<div align="left">// document=dom4j.generateDocumentByMethod();</div>
<div align="left">document = dom4j.generateDocumentByString();</div>
<div align="left">dom4j.saveDocument(document, <b>new</b> File("output.xml"));</div>
<div align="left">}</div>
<div align="left">}</div></td>
</tr>
</tbody>
</table>


<div>方法generateDocumentByMethod()通过调用方法构建xml文档：</div>


<div>1.使用DocumentHelper得到Document实例</div>


<div>Document document = DocumentHelper.<i>createDocument</i>();</div>


<div>2.创建Processing Instruction</div>


<div>document.addProcessingInstruction("xml-stylesheet", inMap);</div>


<div>3.创建元素Element</div>


<div>Element studentsElement = document.addElement("students");</div>


<div>4.为元素添加注释Comment</div>


<div>studentsElement.addComment("An Student Catalog");</div>


<div>5.为元素添加属性</div>


<div>studentsElement.addComment("An Student Catalog");</div>


<div>6.为元素添加文本值Text</div>


<div>ageElement.setText("18");</div>


<div></div>


<div>方法generateDocumentByString()通过字符串转换直接构建xml文档，使用DocumentHelper.<i>parseText</i>()来实现.</div>


<div align="left">document = DocumentHelper.<i>parseText</i>(text);</div>


<div></div>


<div>方法saveDocument(Document document, File outputXml)将文档输出到文件保存，可指定字符编码，可指定格式化输出。</div>


<div><b>3.</b><b>修改</b><b>XML</b><b>文档</b><b></b></div>


<div>这里使用xpath来定位待修改的元素和属性，需要jaxen的支持。</div>


<div>示例中将students-gen.xml的第一个student元素的sn属性改为001，其子元素name内容改为jeff。</div>


<div>XmlMod.java</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>import</b> java.io.File;</div>
<div align="left"><b>import</b> java.io.FileWriter;</div>
<div align="left"><b>import</b> java.io.IOException;</div>
<div align="left"><b>import</b> java.util.Iterator;</div>
<div align="left"><b>import</b> java.util.List;</div>
<div align="left"></div>
<div align="left"><b>import</b> org.dom4j.Attribute;</div>
<div align="left"><b>import</b> org.dom4j.Document;</div>
<div align="left"><b>import</b> org.dom4j.DocumentException;</div>
<div align="left"><b>import</b> org.dom4j.Element;</div>
<div align="left"><b>import</b> org.dom4j.io.SAXReader;</div>
<div align="left"><b>import</b> org.dom4j.io.XMLWriter;</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>class</b> XmlMod {</div>
<div align="left"><b>public</b> <b>void</b> modifyDocument(File inputXml) {</div>
<div align="left"><b>try</b> {</div>
<div align="left">SAXReader saxReader = <b>new</b> SAXReader();</div>
<div align="left">Document document = saxReader.read(inputXml);</div>
<div align="left">List list = document.selectNodes("//students/student/@sn");</div>
<div align="left">Iterator iter = list.iterator();</div>
<div align="left"><b>while</b> (iter.hasNext()) {</div>
<div align="left">Attribute attribute = (Attribute) iter.next();</div>
<div align="left"><b>if</b> (attribute.getValue().equals("01"))</div>
<div align="left">attribute.setValue("001");</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">list = document.selectNodes("//students/student");</div>
<div align="left">iter = list.iterator();</div>
<div align="left"><b>while</b> (iter.hasNext()) {</div>
<div align="left">Element element = (Element) iter.next();</div>
<div align="left">Iterator iterator = element.elementIterator("name");</div>
<div align="left"><b>while</b> (iterator.hasNext()) {</div>
<div align="left">Element nameElement = (Element) iterator.next();</div>
<div align="left"><b>if</b> (nameElement.getText().equals("sam"))</div>
<div align="left">nameElement.setText("jeff");</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">XMLWriter output = <b>new</b> XMLWriter(<b>new</b> FileWriter(<b>new</b> File(</div>
<div align="left">"students-modified.xml")));</div>
<div align="left">output.write(document);</div>
<div align="left">output.close();</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>catch</b> (DocumentException e) {</div>
<div align="left">System.<i>out</i>.println(e.getMessage());</div>
<div align="left">} <b>catch</b> (IOException e) {</div>
<div align="left">System.<i>out</i>.println(e.getMessage());</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>static</b> <b>void</b> main(String[] argv) {</div>
<div align="left">XmlMod dom4jParser = <b>new</b> XmlMod();</div>
<div align="left">dom4jParser.modifyDocument(<b>new</b> File("students-gen.xml"));</div>
<div align="left">}</div>
<div>}</div></td>
</tr>
</tbody>
</table>


<div>1.使用File定位文件资源，并基于此获得Document实例</div>


<div align="left">SAXReader saxReader = <b>new</b> SAXReader();</div>


<div>Document document = saxReader.read(inputXml);</div>


<div>2.Document实例的selectNodes方法可以传入xpath，并返回一个List实例，基于此使用迭代器，完成特定的应用</div>


<div>List list = document.selectNodes("//students/student/@sn");</div>


<div><b>4.</b><b>遍历</b><b>XML</b><b>文档</b><b></b></div>


<div>这里提供两种遍历方法，一种是基于迭代的遍历，一种是基于Visitor模式的遍历。</div>


<div>XmlTra.java</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>import</b> java.io.File;</div>
<div align="left"><b>import</b> java.util.Iterator;</div>
<div align="left"></div>
<div align="left"><b>import</b> org.dom4j.Attribute;</div>
<div align="left"><b>import</b> org.dom4j.Document;</div>
<div align="left"><b>import</b> org.dom4j.DocumentException;</div>
<div align="left"><b>import</b> org.dom4j.Element;</div>
<div align="left"><b>import</b> org.dom4j.ProcessingInstruction;</div>
<div align="left"><b>import</b> org.dom4j.VisitorSupport;</div>
<div align="left"><b>import</b> org.dom4j.io.SAXReader;</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>class</b> XmlTra {</div>
<div align="left"><b>private</b> File inputXml;</div>
<div align="left"></div>
<div align="left"><b>public</b> XmlTra(File inputXml) {</div>
<div align="left"><b>this</b>.inputXml = inputXml;</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> Document getDocument() {</div>
<div align="left">SAXReader saxReader = <b>new</b> SAXReader();</div>
<div align="left">Document document = <b>null</b>;</div>
<div align="left"><b>try</b> {</div>
<div align="left">document = saxReader.read(inputXml);</div>
<div align="left">} <b>catch</b> (DocumentException e) {</div>
<div align="left">e.printStackTrace();</div>
<div align="left">}</div>
<div align="left"><b>return</b> document;</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> Element getRootElement() {</div>
<div align="left"><b>return</b> getDocument().getRootElement();</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> traversalDocumentByIterator() {</div>
<div align="left">Element root = getRootElement();</div>
<div align="left">// 枚举根节点下所有子节点</div>
<div align="left"><b>for</b> (Iterator ie = root.elementIterator(); ie.hasNext();) {</div>
<div align="left">System.<i>out</i>.println("======");</div>
<div align="left">Element element = (Element) ie.next();</div>
<div align="left">System.<i>out</i>.println(element.getName());</div>
<div align="left"></div>
<div align="left">// 枚举属性</div>
<div align="left"><b>for</b> (Iterator ia = element.attributeIterator(); ia.hasNext();) {</div>
<div align="left">Attribute attribute = (Attribute) ia.next();</div>
<div align="left">System.<i>out</i>.println(attribute.getName() + ":"</div>
<div align="left">+ attribute.getData());</div>
<div align="left">}</div>
<div align="left">// 枚举当前节点下所有子节点</div>
<div align="left"><b>for</b> (Iterator ieson = element.elementIterator(); ieson.hasNext();) {</div>
<div align="left">Element elementSon = (Element) ieson.next();</div>
<div align="left">System.<i>out</i>.println(elementSon.getName() + ":"</div>
<div align="left">+ elementSon.getText());</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> traversalDocumentByVisitor() {</div>
<div align="left">getDocument().accept(<b>new</b> MyVisitor());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">/**</div>
<div align="left">* 定义自己的访问者类</div>
<div align="left">*/</div>
<div align="left"><b>private</b> <b>static</b> <b>class</b> MyVisitor <b>extends</b> VisitorSupport {</div>
<div align="left">/**</div>
<div align="left">* 对于属性节点，打印属性的名字和值</div>
<div align="left">*/</div>
<div align="left"><b>public</b> <b>void</b> visit(Attribute node) {</div>
<div align="left">System.<i>out</i>.println("attribute : " + node.getName() + " = "</div>
<div align="left">+ node.getValue());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">/**</div>
<div align="left">* 对于处理指令节点，打印处理指令目标和数据</div>
<div align="left">*/</div>
<div align="left"><b>public</b> <b>void</b> visit(ProcessingInstruction node) {</div>
<div align="left">System.<i>out</i>.println("PI : " + node.getTarget() + " "</div>
<div align="left">+ node.getText());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">/**</div>
<div align="left">* 对于元素节点，判断是否只包含文本内容，如是，则打印标记的名字和 元素的内容。如果不是，则只打印标记的名字</div>
<div align="left">*/</div>
<div align="left"><b>public</b> <b>void</b> visit(Element node) {</div>
<div align="left"><b>if</b> (node.isTextOnly())</div>
<div align="left">System.<i>out</i>.println("element : " + node.getName() + " = "</div>
<div align="left">+ node.getText());</div>
<div align="left"><b>else</b></div>
<div align="left">System.<i>out</i>.println("--------" + node.getName() + "--------");</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>static</b> <b>void</b> main(String[] argv) {</div>
<div align="left">XmlTra dom4jParser = <b>new</b> XmlTra(<b>new</b> File("students-gen.xml"));</div>
<div align="left">// dom4jParser.traversalDocumentByIterator();</div>
<div align="left">dom4jParser.traversalDocumentByVisitor();</div>
<div align="left">}</div>
<div align="left">}</div></td>
</tr>
</tbody>
</table>


<div>方法traversalDocumentByIterator()提供一种基于迭代的遍历实现，每个Element通过elementIterator()和attributeIterator()取代其子元素和属性的迭代器。</div>


<div>Visitor是GOF设计模式之一。其主要原理就是两种类互相保有对方的引用，并且一种作为Visitor去访问许多Visitable。DOM4J中的Visitor模式只需要自定一个类实现Visitor接口即可。</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>public</b> <b>class</b> MyVisitor <b>extends</b> VisitorSupport {</div>
<div align="left"><b>public</b> <b>void</b> visit(Element element) {</div>
<div align="left">System.<i>out</i>.println(element.getName());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> visit(Attribute attr) {</div>
<div align="left">System.<i>out</i>.println(attr.getName());</div>
<div align="left">}</div>
<div>}</div></td>
</tr>
</tbody>
</table>


<div>调用： root.accept(new MyVisitor())</div>


<div>Visitor接口提供多种Visit()的重载，根据XML不同的对象，将采用不同的方式来访问。上面是给出的Element和Attribute的简单实现，一般比较常用的就是这两个。VisitorSupport是DOM4J提供的默认适配器，Visitor接口的Default Adapter模式，这个模式给出了各种visit(*)的空实现，以便简化代码。</div>


<div>注意，这个Visitor是自动遍历所有子节点的。如果是root.accept(MyVisitor)，将遍历子节点。我第一次用的时候，认为是需要自己遍历，便在递归中调用Visitor，结果可想而知。</div>


<div><b>5.</b><b>使用</b><b>ElementHandler</b></div>


<div>XmlHandler.java</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>import</b> java.io.File;</div>
<div align="left"></div>
<div align="left"><b>import</b> org.dom4j.DocumentException;</div>
<div align="left"><b>import</b> org.dom4j.Element;</div>
<div align="left"><b>import</b> org.dom4j.ElementHandler;</div>
<div align="left"><b>import</b> org.dom4j.ElementPath;</div>
<div align="left"><b>import</b> org.dom4j.io.SAXReader;</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>class</b> XmlHandler {</div>
<div align="left"><b>public</b> <b>static</b> <b>void</b> main(String[] args) {</div>
<div align="left">SAXReader saxReader = <b>new</b> SAXReader();</div>
<div align="left">File file = <b>new</b> File("students.xml");</div>
<div align="left"><b>try</b> {</div>
<div align="left">// 添加一个ElementHandler实例。</div>
<div align="left">saxReader.addHandler("/students/student", <b>new</b>StudentHandler());</div>
<div align="left">saxReader.read(file);</div>
<div align="left"></div>
<div align="left">} <b>catch</b> (DocumentException e) {</div>
<div align="left">System.<i>out</i>.println(e.getMessage());</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">/**</div>
<div align="left">* 定义StudentHandler处理器类，对&lt;student&gt;元素进行处理。</div>
<div align="left">*/</div>
<div align="left"><b>private</b> <b>static</b> <b>class</b> StudentHandler <b>implements</b> ElementHandler {</div>
<div align="left"><b>public</b> <b>void</b> .Start(ElementPath path) {</div>
<div align="left">Element elt = path.getCurrent();</div>
<div align="left">System.<i>out</i>.println("Found student: " + elt.attribut.ue("sn"));</div>
<div align="left">// 添加对子元素&lt;name&gt;的处理器。</div>
<div align="left">path.addHandler("name", <b>new</b> NameHandler());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> .End(ElementPath path) {</div>
<div align="left">// 移除对子元素&lt;name&gt;的处理器。</div>
<div align="left">path.removeHandler("name");</div>
<div align="left">}</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left">/**</div>
<div align="left">* 定义NameHandler处理器类，对&lt;student&gt;的&lt;name&gt;子元素进行处理。</div>
<div align="left">*/</div>
<div align="left"><b>private</b> <b>static</b> <b>class</b> NameHandler <b>implements</b> ElementHandler {</div>
<div align="left"><b>public</b> <b>void</b> .Start(ElementPath path) {</div>
<div align="left">System.<i>out</i>.println("path : " + path.getPath());</div>
<div align="left">}</div>
<div align="left"></div>
<div align="left"><b>public</b> <b>void</b> .End(ElementPath path) {</div>
<div align="left">Element elt = path.getCurrent();</div>
<div align="left">// 输出&lt;name&gt;元素的名字和它的文本内容。</div>
<div align="left">System.<i>out</i>.println(elt.getName() + " : " + elt.getText());</div>
<div align="left">}</div>
<div align="left">}</div>
<div>}</div></td>
</tr>
</tbody>
</table>


<div><b>6.</b><b>使用</b><b>XSLT</b><b>转换</b><b>XML</b></div>


<div>这里必须使用JAXP的支持。</div>


<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="568">
<div align="left"><b>import</b> javax.xml.transform.Transformer;</div>
<div align="left"><b>import</b> javax.xml.transform.TransformerFactory;</div>
<div align="left"></div>
<div align="left"><b>import</b> org.dom4j.Document;</div>
<div align="left"><b>import</b> org.dom4j.io.DocumentResult;</div>
<div align="left"><b>import</b> org.dom4j.io.DocumentSource;</div>
<div align="left"></div>
<div align="left">……</div>
<div align="left"><b>public</b> Document styleDocument(Document document, String stylesheet)</div>
<div align="left"><b>throws</b> Exception {</div>
<div align="left"></div>
<div align="left">// load the transformer using JAXP</div>
<div align="left">TransformerFactory factory = TransformerFactory.newInstance();</div>
<div align="left">Transformer transformer = factory.newTransformer(<b>new</b>StreamSource(stylesheet));</div>
<div align="left"></div>
<div align="left">// now lets style the given document</div>
<div align="left">DocumentSource source = <b>new</b> DocumentSource(document);</div>
<div align="left">DocumentResult result = <b>new</b> DocumentResult();</div>
<div align="left">transformer.transform(source, result);</div>
<div align="left"></div>
<div align="left">// return the transformed document</div>
<div align="left">Document transformedDoc = result.getDocument();</div>
<div align="left"><b>return</b> transformedDoc;</div>
<div>}</div>
<div>……</div>
&nbsp;</td>
</tr>
</tbody>
</table>


      <div class="readall"><a href="/about-dom4j-example/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/securityerror-error-2148-ddemodemobin-debugtextlayout_4-0-0-10485-swf/">SecurityError Error 2148 SWF 不能访问本地资源</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月13日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#flash">flash</a>
      </p>
    </header>
    <div class="post-main">
      <h2>错误提示：</h2>

<p>SWF 文件不能被本地访问 不能访问本地 只有仅限于文件系统的 SWF 文件和可信的本地 SWF 文件可以访问本地资源</p>

<h2>错误信息：</h2>

<p>SecurityError: Error #2148: SWF 文件 D:\demo\demo.swf 不能访问本地资源 D:\demo\demo\bin-debug\textLayout_4.0.0.10485.swf。只有仅限于文件系统的 SWF 文件和可信的本地 SWF 文件可以访问本地资源。</p>

<h2>解决方法：</h2>

<h3>第一种办法</h3>

<p>在Flash插件上右键->全局设置->高级->开发人员工具->受信任的位置设置->添加 ，然后添加你的文件或者文件夹即可。</p>

<p>说明：在本地测试期间，Flash Player 可以显示阻止应用程序正常运行的安全警告。您可以使用“受信任位置设置”面板将您自己的 SWF 或 FLV 内容指定为可信内容，从而解决这一问题。您可以将个别文件的路径指定为可信路径，或者指定文件夹为可信文件夹。可信文件夹中的所有文件及其任何子文件夹也会受信任。使用此选项卡可指定您计算机上包含您信任的 SWF 或 FLV 内容的位置。可信内容不遵循阻止内容访问 Internet 和本地计算机文件系统的安全规则。</p>

<h3>第二种方法:</h3>

<p>在C:\WINDOWS\system32\Macromed\Flash\FlashPlayerTrust目录下添加一个文件，比如：1.txt（文件名可任意起），文件内容为项目的路径，当然也可以设置为“D:\” 说明： 为了让你的Flash在用户硬盘中拥有同时访问网络和本地的能力，你必须在用户计算机的FlashPlayerTrust目录中为你的Flash添加权限. FlashPlayerTrust 配置文件。 这些是列出受信任路径的简单文本文件。这些文件由可执行的安装程序创建。当安装程序将 SWF 安装到用户的计算机时, 它能够安装信任的配置文件并指定 SWF 是受信任的。</p>

      <div class="readall"><a href="/securityerror-error-2148-ddemodemobin-debugtextlayout_4-0-0-10485-swf/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/flex4-6-label-to-linkbutton/">Flex4.6 用Lable自定义LinkButton</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月08日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#flex">flex</a>
      </p>
    </header>
    <div class="post-main">
      <p>很简单，先是继承Lable ,而后 设置相关属性，比如 小手鼠标、下划线等</p>

<pre><code>package com.waylau.eagleos.components
{
    import spark.components.Label;

    public class LinkButton extends Label
    {
        public function LinkButton()
        {
            super();

            this.useHandCursor = true ;
            this.buttonMode = true ;
            this.mouseChildren = false ;

            this.setStyle("textDecoration","underline");
        }
    }
}
</code></pre>

      <div class="readall"><a href="/flex4-6-label-to-linkbutton/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/golang-strings-split-get-url/">Golang strings.Split获取字符串中的url/域名的简易方法</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月07日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#golang">golang</a>
      </p>
    </header>
    <div class="post-main">
      <pre><code>package main

import (
    "fmt"
    "strings"
)

func main() {
    fmt.Println("Hello World!")

    a := "golang strings.Split获取字符串中的url/域名的简易方法http://www.waylau.com/golang-strings-split-get-url/"
    a1 := strings.Split(a, "//")[1]
    a2 := strings.Split(a1, "/")[0]

    fmt.Println(a1) //输出为：www.waylau.com/golang-strings-split-get-url/
    fmt.Println(a2) //输出为：www.waylau.com
}
</code></pre>

      <div class="readall"><a href="/golang-strings-split-get-url/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="posts">
  <section class="post">
    <header class="post-header">
      <h1 class="post-title"><a href="/huizhou-to-flat-sea-city-seaside-hot-springs-xunliao-bay-tourism-strategy/">惠州——平海古城、海滨温泉、巽寮湾-旅游攻略</a></h1>
      <p class="post-meta">
        <i class="fa fa-calendar"></i>
        2013年04月06日
        <i class="space"></i>
        <i class="fa fa-tags"></i>
        <a class="post-category" href="/page/category.html#outdoor">outdoor</a>
      </p>
    </header>
    <div class="post-main">
      <p>1.在惠州汽车站。乘坐惠州——惠东汽车到达惠东汽车站（18元），转乘惠东——港口专线巴士（18元），至平海镇下车，下车向巷子里走约200米 ，见 城墙，即是古城</p>

<p>其实，平海镇方圆不大，东南西北四个门都见完了也就 几十分钟的事情。城内有几个庙。
恰逢清明节，百姓插旗烧香祭祖，院门大开，也算是领略了风俗民情。
城内无吃饭的地方，吃饭在下车的大路边。
在沙县吃了一碗鸡腿饭13元。</p>

<p>2.平海古城转车去海滨温泉就有所不便，没有的士，也没有班车，上了摩托35元，也只能认了，自己走的话大概要十几公里。
一路狂飙，披头散发，直接送到海滨温泉旅游区门口。</p>

<p>海滨温泉门票是团购的100+，因为是过节临时加多了10元，不限时，貌似营业到晚上12点
去到那里 大概是下午1点半左右，里面大大小小温泉40多个，各种药池，花池，酒池
，不过里面的温水是不是地热的水就不好说了~
提供免费的花生小吃还有饮料，橙汁兑水的吧，淡出鸟来
还有花生都不脆，感觉过气的。
另外有小番薯提供，这个不错。
吃了串鱼丸，三颗10元。</p>

<p>泡了一圈，发觉才2点多，休息了一下又去平泡了一圈。其实不能泡太久。
熬到四点过，有歌舞看，走了，不看了。
出门，发现搭车又不便了。决定走到巽寮镇。距离也就是十几公里。（其实是有去惠东的巴士可以搭的）
走了一半路程，天已经暗了。有哥们停车顺了一段路，都是来泡泉的，有亲切感。还是有车好，一脚油门，几分钟就到了酒店。
我是团购的海景山庄，100+标双,到店需要观海的房间的又要对加钱。
酒店内的设施一般，晚上定点放热水。
位置不错，基本上躺床上就能见到海
附近没有吃货，全是酒店。走约两三公里就到镇上。淡季，海鲜还是这么贵~</p>

<p>3.第二天起来，约了隔壁的几个家伙一起去巽寮湾出海打鱼。
一出门就下雨了，我汗。
酒店附近不能直接下海，要走一两公里到滨海度假村有入口可以进海滩。
也没捡贝壳，光避雨去了。附近都是待建的工地。一片荒凉。
天晴上了渔船打鱼，80元包船，打到都是自己的。
结果一趟来回就是几个濑尿虾，不够吃啊。又买了条鱼，叫渔家帮忙煮了。
坐渔家的快艇还是有快感，擦，一条鱼带加工费要了120元</p>

<p>4.附近还有天后宫岭南民俗文化商业街，
酒吧一条街还在招商，人影木有。
商业街有妈祖庙。
天又下雨，走出街到大路，坐车回惠东17元
总结：
路费 100+
打鱼 80
吃饭 200+
交通不是很方便。
2013-4-5</p>

      <div class="readall"><a href="/huizhou-to-flat-sea-city-seaside-hot-springs-xunliao-bay-tourism-strategy/" id="post-readall">阅读全文&nbsp;<i class="fa fa-chevron-right"></i></a></div>
    </div>
  </section>
</div>

<div class="pagination">
  
  
  <a class="pagination-item newer" href="/page/17"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;上一页</a>
  
    

    
      <a href="/">1</a>
      

    
      
      <a href="/page/2">2</a>
      
    
      
      <a href="/page/3">3</a>
      
    
      
      <a href="/page/4">4</a>
      
    
      
      <a href="/page/5">5</a>
      
    
      
      <a href="/page/6">6</a>
      
    
      
      <a href="/page/7">7</a>
      
    
      
      <a href="/page/8">8</a>
      
    
      
      <a href="/page/9">9</a>
      
    
      
      <a href="/page/10">10</a>
      
    
      
      <a href="/page/11">11</a>
      
    
      
      <a href="/page/12">12</a>
      
    
      
      <a href="/page/13">13</a>
      
    
      
      <a href="/page/14">14</a>
      
    
      
      <a href="/page/15">15</a>
      
    
      
      <a href="/page/16">16</a>
      
    
      
      <a href="/page/17">17</a>
      
    
      
      <span class="current-page">18</span>
      
    
      
      <a href="/page/19">19</a>
      
    
      
      <a href="/page/20">20</a>
      
    
      
      <a href="/page/21">21</a>
      
    
      
      <a href="/page/22">22</a>
      
    
  (共129篇)

  
  <a class="pagination-item older" href="/page/19">下一页&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>
  
</div>

    <footer>Copyright&nbsp;&copy;&nbsp;2014 <a href="http://www.waylau.com">Way Lau's Blog</a><br/><i class="fa fa-cogs" style="color:blueviolet;">&nbsp;</i>Powered by <a href="https://github.com/waylau/jekyll-theme-blog" target="_blank">jekyll-theme-blog</a></footer>
    </div>


  </div>    
  <div id="top"><a id="rocket" href="javascript:;" title="返回顶部"><i></i></a></div>
  


</body>
</html>