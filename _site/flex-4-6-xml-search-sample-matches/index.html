<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Way Lau's Personal Site | www.waylau.com">
  <meta name="author" content="Way Lau">
  <meta name="keywords" content="Flex 4.6 XML搜索、匹配示例, Way Lau's Blog, Way Lau">
  <title>Flex 4.6 XML搜索、匹配示例 - Way Lau's Blog</title>
  <link rel="canonical" href="http://www.waylau.com/flex-4-6-xml-search-sample-matches/">
  <link rel="icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/res/img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/res/css/public.css">
  <link rel="stylesheet" href="/res/css/light.css">
  <script src="/res/js/light.js"></script>
  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?28cf5fa48a599e39c5cc760931de942f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
</head>
<body>
  <div id="blog">
    <div class="sidebar">
  <div class="profilepic">
    <a href="/"><img src="/res/img/icon.png" alt="logo"></img></a>
  </div>
  <h1 class="title"><a href="/">Way Lau's Blog</a></h1>
  <h2 class="sub-title">技术改变世界！</h2>
  <nav id="nav">
    <ul>
    
      <li><a href="/timing/"><i class="fa fa-clock-o"></i>&nbsp;时光机</a></li>
    
      <li><a href="/categories/"><i class="fa fa-tags"></i>&nbsp;分类</a></li>
    
      <li><a href="/tags/"><i class="fa fa-bookmark"></i>&nbsp;标签</a></li>
    
      <li><a href="http://labs.waylau.com/"><i class="fa fa-building"></i>&nbsp;示例</a></li>
    
      <li><a href="/books/"><i class="fa fa-book"></i>&nbsp;书籍</a></li>
    
      <li><a href="/about/"><i class="fa fa-paper-plane-o"></i>&nbsp;关于</a></li>
    
    </ul>
  </nav>  
  <nav id="sub-nav">
    <a class="weibo " href="http://weibo.com/waylau521" title="新浪微博" target="_blank"><i class="fa fa-weibo "></i></a>
    <a class="github" href="https://github.com/waylau" title="GitHub" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    <a class="twitter" href="https://twitter.com/waylau521" title="Twitter" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
    <a class="rss" href="/page/feed.xml" title="RSS订阅" target="_blank"><i class="fa fa-rss"></i></a>
  </nav>
  <div id="license">
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank" title="本站所有作品采用：&#10;知识共享《署名 非商业性使用 相同方式共享 3.0》&#10;进行许可" >
    <img alt="License" height="31" width="88" src="/res/img/license.png" /></a>
  </div>
</div>
    <div class="main">
    <header class="post-header">
  <h1 class="post-title"><a href="/flex-4-6-xml-search-sample-matches/">Flex 4.6 XML搜索、匹配示例</a></h2>
  <p class="post-meta">
    <i class="fa fa-calendar"></i>
    2011年05月20日
    <i class="space"></i>
    <i class="fa fa-tags"></i>
    <a class="post-category" href="/page/category.html#flex">flex</a>	
  </p>
</header>
<div class="post-main">
<p>效果见图</p>

<p>初始化界面</p>

<p><img class="alignnone" alt="" src="http://a.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=512510f857fbb2fb302b58177f715199/3c6d55fbb2fb431665e962df22a4462308f7d3a4.jpg?referer=becb17663887e9501b00c75c1d7a&amp;x=.jpg" width="258" height="385" /></p>

<p>输入“设置”，进行搜索、匹配后界面</p>

<p><img class="alignnone" alt="" src="http://a.hiphotos.bdimg.com/album/s%3D550%3Bq%3D90%3Bc%3Dxiangce%2C100%2C100/sign=512510f857fbb2fb302b58177f715199/3c6d55fbb2fb431665e962df22a4462308f7d3a4.jpg?referer=becb17663887e9501b00c75c1d7a&amp;x=.jpg" width="258" height="385" /></p>

<p>下面是代码
    &lt;?xml version="1.0" encoding="utf-8"?>
    &lt;s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600" creationComplete="init(event)">
    &lt;fx:Script>
        &lt;![CDATA[
            import mx.events.FlexEvent;
            import mx.utils.StringUtil;
            import spark.events.TextOperationEvent;</p>

<pre><code>        public var rawList:XML = 
            &lt;apps name="应用程序" &gt;
              &lt;item name="关于"
                    icon="plugins/about_002/assets/icons/about_48.png" 
                    iconSmall="plugins/about_002/assets/icons/about_24.png" 
                    moduleUrl="plugins/about_002/Ahout_002.swf"
                    version="1.0"  date="2013-5-13"  author="way" type="plugin"
                    description="关于能源管理中心的一个说明" /&gt;

             &lt;item name="程序管理" 
                    icon="plugins/appManager_001/assets/icons/apps_48.png" 
                    iconSmall="plugins/appManager_001/assets/icons/apps_24.png"
                    moduleUrl="plugins/appManager_001/AppManager_001.swf"
                    version="1.0"  date="2013-3-5"  author="way" type="plugin"  resizable="false"
                    description="对系统应用，及用户自定义应用进行管理"
                    shortCutCreated="true"/&gt;

              &lt;item name="导航设置" 
                    icon="plugins/navigatorSetting_001/assets/icons/gears_48.png" 
                    iconSmall="plugins/navigatorSetting_001/assets/icons/gears_24.png" 
                    moduleUrl="plugins/navigatorSetting_001/NavigatorSetting_001.swf"
                    version="1.0"  date="2013-3-13" author="way" type="plugin" resizable="false"
                    description="对导航进行设置"/&gt;
              &lt;item name="主题设置" 
                    icon="plugins/themeSetting_001/assets/icons/icon_48.png" 
                    iconSmall="plugins/themeSetting_001/assets/icons/icon_24.png" 
                    moduleUrl="plugins/themeSetting_001/ThemeSetting_001.swf"
                    version="1.0"  date="2013-3-5" author="way" type="plugin" resizable="false"
                    description="对系统的主题、样式进行设置"/&gt;
            &lt;/apps&gt;
            ;     

        [Bindable]
        public var rawListShow:XML = null;  //搜索过滤后的数据

        protected function init(event:FlexEvent):void
        {
            getData();
        }

        protected function textinput1_changeHandler(event:TextOperationEvent):void
        {
            getData();
        }

        //初始化数据
        private function getData():void{
            if(StringUtil.trim(textInput.text) == ""){
                rawListShow = rawList ;

            }else{
                createNewXml(textInput.text,rawList);
            }

            /* 打开或关闭指定项目下的所有树项目。如果设置 dataProvider 之后立即调用 expandChildrenOf()，
            则您可能看不到正确的行为。您应该等待对组件进行验证或调用 validateNow() 方法 */
            tree1.validateNow();

            expandtree();
        }

        //搜索过滤后,生产新的xml
        private function createNewXml(searchString:String, xml:XML):void{
            rawListShow =&lt;apps  name="应用程序" /&gt;;

            for(var i:int = 0; i&lt;xml.children().length(); i++)
            {
                var itemXml:XML = xml.child("item")[i];
                if(isInStr(searchString,itemXml.@name.toString())){   
                    rawListShow.appendChild(itemXml);
                }
            }
        }

        //判断search_str是否在str内 
        public function isInStr(search_str:String , str:String):Boolean{    
            var num:int= str.indexOf(search_str);
            if(num&gt;-1){
                return true;
            }else{
                return false;
            }
        }

        //展开树
        private function expandtree():void {
            for each(var item:XML in this.tree1.dataProvider)
            this.tree1.expandChildrenOf(item,true);
        }

    ]]&gt;
&lt;/fx:Script&gt;
&lt;fx:Declarations&gt;
    &lt;!-- 该例子由waylau.com提供--&gt;
&lt;/fx:Declarations&gt;
&lt;s:TextInput prompt="请输入要搜索的字段"  x="10" y="10" 
             change="textinput1_changeHandler(event)" id="textInput"/&gt;
&lt;mx:Tree id="tree1" dataProvider="{rawListShow}" 
         labelField="@name" width="200" height="300" x="10" y="40"&gt;
&lt;/mx:Tree&gt;

&lt;s:Label text="更多例子 请关注  waylau.com" x="10" y="360"/&gt;
&lt;/s:Application&gt;
</code></pre>

</div>
<div class="share">
  <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
  </div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["qzone","tsina","weixin","sqq"],"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/res/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>
<div class="pagination">

<a class="pagination-item newer" href="/simple-way-to-implement-browsing-famous-overseas-web-sites-without-the-ladder-gateway-dns-hosts/"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;简单实现浏览国外著名网站的方法，不用梯子，修改本机的 hosts</a>


<a class="pagination-item older" href="/tomcat-setting-enter-ip-address-direct-to-project-home-page/">Tomcat设置，输入IP地址 ，直接访问项目主页&nbsp;&nbsp;<i class="fa fa-arrow-right"></i></a>

</div>
<div class="comments">
  <div class="ds-thread" data-title="Flex 4.6 XML搜索、匹配示例" data-thread-key="/flex-4-6-xml-search-sample-matches" data-url="http://www.waylau.com/flex-4-6-xml-search-sample-matches/"></div>
  <script type="text/javascript">var duoshuoQuery = {short_name:"waylau"};(function(){var ds = document.createElement('script');ds.type = 'text/javascript';ds.async = true;ds.src = '/res/js/embed.js';ds.charset = 'UTF-8';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);})();</script>
</div>
    <footer>Copyright&nbsp;&copy;&nbsp;2014 <a href="http://www.waylau.com">Way Lau's Blog</a><br/><i class="fa fa-cogs" style="color:blueviolet;">&nbsp;</i>Powered by <a href="https://github.com/waylau/jekyll-theme-blog" target="_blank">jekyll-theme-blog</a></footer>
    </div>


  </div>    
  <div id="top"><a id="rocket" href="javascript:;" title="返回顶部"><i></i></a></div>
  


</body>
</html>